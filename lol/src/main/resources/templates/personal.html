<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°œì¸í™” ë¶„ì„ - Luminary</title>
    <link rel="icon" type="image/png" href="/images/wepSiteLogo.png">

    <!-- ğŸŒŒ Cards Galaxy ì±”í”¼ì–¸ ì¶”ì²œ ì‹œìŠ¤í…œ -->
    <script src="/js/cardsGalaxyRecommendation.js"></script>

    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
            background-color: #0a0a0a;
        }

        .page-container {
            width: 100%;
            min-height: 100vh;
            background-image: url('/images/background.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
        }

        .top-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 200px;
            background: linear-gradient(to bottom,
                rgba(0, 0, 0, 1) 0%,
                rgba(0, 0, 0, 0.95) 5%,
                rgba(0, 0, 0, 0.9) 10%,
                rgba(0, 0, 0, 0.85) 15%,
                rgba(0, 0, 0, 0.8) 20%,
                rgba(0, 0, 0, 0.75) 25%,
                rgba(0, 0, 0, 0.7) 30%,
                rgba(0, 0, 0, 0.65) 35%,
                rgba(0, 0, 0, 0.6) 40%,
                rgba(0, 0, 0, 0.55) 45%,
                rgba(0, 0, 0, 0.5) 50%,
                rgba(0, 0, 0, 0.45) 55%,
                rgba(0, 0, 0, 0.4) 60%,
                rgba(0, 0, 0, 0.35) 65%,
                rgba(0, 0, 0, 0.3) 70%,
                rgba(0, 0, 0, 0.25) 75%,
                rgba(0, 0, 0, 0.2) 80%,
                rgba(0, 0, 0, 0.15) 85%,
                rgba(0, 0, 0, 0.1) 90%,
                rgba(0, 0, 0, 0.05) 95%,
                rgba(0, 0, 0, 0) 100%
            );
            z-index: 5;
        }

        .header-logo {
            position: fixed;
            top: 20px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .logo-icon {
            height: 30px;
            margin-right: 10px;
        }

        .small-logo {
            height: 25px;
        }

        .main-content {
            padding-top: 120px;
            padding-bottom: 50px;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 3;
        }

        /* ğŸ”¥ í†µì¼ëœ ì¹´ë“œ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        .unified-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .unified-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .unified-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .unified-card:hover::before {
            opacity: 1;
        }

        /* ğŸ¯ ì‚¬ìš©ì ì •ë³´ì™€ ë£°ë ›ì´ í•¨ê»˜ ìˆëŠ” ìƒë‹¨ ì„¹ì…˜ */
        .user-and-roulette-section {
            display: flex;
            gap: 20px;
            margin: 20px;
            align-items: stretch;
        }

        .user-info-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            flex: 1;
            min-width: 0;
        }

        .user-info-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .user-info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .user-info-card:hover::before {
            opacity: 1;
        }

        .profile-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 4px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 15px;
            flex-shrink: 0;
        }

        .user-info-text h1 {
            color: #fff;
            font-size: 2rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .user-subtitle {
            color: #aaa;
            font-size: 1rem;
            margin-bottom: 10px;
        }

        /* ğŸ¯ ì±”í”¼ì–¸ ë£°ë › ì¹´ë“œ */
        .champion-roulette-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            flex: 0 0 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .champion-roulette-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ffc107, #ff9800, #f44336);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .champion-roulette-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .champion-roulette-card:hover::before {
            opacity: 1;
        }

        .roulette-title {
            color: #ffc107;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .roulette-display {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .roulette-display.spinning {
            animation: spin 2s linear, colorShift 2s ease-in-out;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(1080deg); }
        }

        @keyframes colorShift {
            0% { background: linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #48dbfb 100%); }
            50% { background: linear-gradient(135deg, #feca57 0%, #48dbfb 50%, #ff6b6b 100%); }
            100% { background: linear-gradient(135deg, #48dbfb 0%, #ff6b6b 50%, #feca57 100%); }
        }

        .champion-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.8);
        }

        .roulette-question {
            font-size: 3rem;
            color: white;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .roulette-result {
            text-align: center;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .champion-name {
            color: #fff;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .champion-role {
            color: #ffc107;
            font-size: 0.9rem;
            background: rgba(255, 193, 7, 0.2);
            padding: 4px 12px;
            border-radius: 12px;
            margin-bottom: 10px;
        }

        .champion-tip {
            color: #ccc;
            font-size: 0.8rem;
            line-height: 1.4;
            text-align: center;
        }

        .roulette-btn {
            background: linear-gradient(45deg, #ffc107, #ff9800);
            border: none;
            border-radius: 25px;
            color: white;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .roulette-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 193, 7, 0.4);
            background: linear-gradient(45deg, #ffcd38, #ffa726);
        }

        .roulette-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* ğŸŒŒ Cards Galaxy ì»¨í…Œì´ë„ˆ - í–‰ì„± ê¶¤ë„ íš¨ê³¼ í¬í•¨ */
        .galaxy-container {
            position: relative;
            width: 100%;
            min-height: 800px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            margin: 30px 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
        }

        .galaxy-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .galaxy-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .galaxy-container:hover::before {
            opacity: 1;
        }

        /* ğŸŒŸ ë³„ë“¤ ì• ë‹ˆë©”ì´ì…˜ */
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite alternate;
        }

        @keyframes twinkle {
            from { opacity: 0.3; transform: scale(1); }
            to { opacity: 1; transform: scale(1.2); }
        }

        /* ğŸª í”Œë ˆì´ì–´ í—ˆë¸Œ (ì¤‘ì•™) - íšŒì „ ì• ë‹ˆë©”ì´ì…˜ */
        .player-hub {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            background: conic-gradient(from 0deg, rgba(102, 126, 234, 0.8), rgba(255, 107, 157, 0.8), rgba(78, 205, 196, 0.8), rgba(102, 126, 234, 0.8));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;
            animation: hubRotate 60s linear infinite;
        }

        @keyframes hubRotate {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .player-info {
            width: 180px;
            height: 180px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(20px);
            text-align: center;
            animation: hubInfoCounter 60s linear infinite;
        }

        @keyframes hubInfoCounter {
            from { transform: rotate(0deg); }
            to { transform: rotate(-360deg); }
        }

        /* ğŸ´ ì±”í”¼ì–¸ ì¹´ë“œ ì»¨í…Œì´ë„ˆ */
        .champion-cards-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
        }

        /* ğŸŒ í–‰ì„± ê¶¤ë„ ì• ë‹ˆë©”ì´ì…˜ - ì±”í”¼ì–¸ ì¹´ë“œë“¤ */
        .champion-card {
            position: absolute;
            width: 160px;
            height: 220px;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            pointer-events: auto;
            opacity: 0;
            left: 50%;
            top: 50%;
            transform-origin: center center;
        }

        /* ê¶¤ë„ë³„ íšŒì „ ì• ë‹ˆë©”ì´ì…˜ */
        .champion-card.orbit-1 {
            animation: orbit1 45s linear infinite;
        }

        .champion-card.orbit-2 {
            animation: orbit2 60s linear infinite;
        }

        .champion-card.orbit-3 {
            animation: orbit3 75s linear infinite;
        }

        /* ì²« ë²ˆì§¸ ê¶¤ë„ (ê°€ì¥ ì•ˆìª½) - 250px ë°˜ì§€ë¦„ */
        @keyframes orbit1 {
            from {
                transform: translate(-50%, -50%) rotate(0deg) translateX(250px) rotate(0deg);
                opacity: 1;
            }
            to {
                transform: translate(-50%, -50%) rotate(360deg) translateX(250px) rotate(-360deg);
                opacity: 1;
            }
        }

        /* ë‘ ë²ˆì§¸ ê¶¤ë„ (ì¤‘ê°„) - 350px ë°˜ì§€ë¦„ */
        @keyframes orbit2 {
            from {
                transform: translate(-50%, -50%) rotate(0deg) translateX(350px) rotate(0deg);
                opacity: 1;
            }
            to {
                transform: translate(-50%, -50%) rotate(360deg) translateX(350px) rotate(-360deg);
                opacity: 1;
            }
        }

        /* ì„¸ ë²ˆì§¸ ê¶¤ë„ (ê°€ì¥ ë°”ê¹¥ìª½) - 450px ë°˜ì§€ë¦„ */
        @keyframes orbit3 {
            from {
                transform: translate(-50%, -50%) rotate(0deg) translateX(450px) rotate(0deg);
                opacity: 1;
            }
            to {
                transform: translate(-50%, -50%) rotate(360deg) translateX(450px) rotate(-360deg);
                opacity: 1;
            }
        }

        .champion-card.visible {
            opacity: 1;
        }

        .champion-card:hover {
            transform: translate(-50%, -50%) scale(1.05);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
            border-color: rgba(102, 126, 234, 0.8);
            z-index: 10;
            animation-play-state: paused;
        }

        .champion-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            margin: 0 auto 10px;
            border: 3px solid rgba(255,255,255,0.3);
            overflow: hidden;
            position: relative;
        }

        .champion-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .champion-name {
            color: white;
            font-size: 1rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 8px;
        }

        .champion-role {
            color: #4ecdc4;
            font-size: 0.8rem;
            text-align: center;
            background: rgba(78, 205, 196, 0.2);
            padding: 4px 10px;
            border-radius: 12px;
            margin-bottom: 10px;
            display: inline-block;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .confidence-score {
            color: #ffc107;
            font-size: 0.9rem;
            text-align: center;
            font-weight: bold;
            background: rgba(255, 193, 7, 0.2);
            padding: 4px 8px;
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .champion-tags {
            display: flex;
            gap: 4px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 8px;
        }

        .champion-tag {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .champion-tag.meta { background: rgba(255, 107, 157, 0.3); color: #ff6b9d; }
        .champion-tag.personal { background: rgba(78, 205, 196, 0.3); color: #4ecdc4; }
        .champion-tag.style { background: rgba(255, 193, 7, 0.3); color: #ffc107; }

        /* ê¶¤ë„ ë§ */
        .orbit-ring {
            position: absolute;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }

        .orbit-ring.ring-1 {
            width: 500px;
            height: 500px;
            border-color: rgba(102, 126, 234, 0.3);
            animation: ringRotate1 40s linear infinite;
        }

        .orbit-ring.ring-2 {
            width: 700px;
            height: 700px;
            border-color: rgba(255, 107, 157, 0.2);
            animation: ringRotate2 60s linear infinite reverse;
        }

        .orbit-ring.ring-3 {
            width: 900px;
            height: 900px;
            border-color: rgba(78, 205, 196, 0.15);
            animation: ringRotate3 80s linear infinite;
        }

        @keyframes ringRotate1 {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @keyframes ringRotate2 {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @keyframes ringRotate3 {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* ë¡œë”© í”Œë ˆì´ìŠ¤í™€ë” */
        .loading-placeholder {
            animation: fadeInOut 2s ease-in-out infinite;
            text-align: center;
            padding: 50px;
            color: white;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* ê¸°ì¡´ ìŠ¤íƒ€ì¼ë“¤ - í†µì¼ëœ ì¹´ë“œ íš¨ê³¼ ì ìš© */
        .comment-section {
            margin: 30px 20px;
        }

        .comment-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            margin: 15px 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .comment-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .comment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .comment-card:hover::before {
            opacity: 1;
        }

        .comment-title {
            color: #4ecdc4;
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .comment-emoji {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .comment-text {
            color: #fff;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .comment-subtext {
            color: #888;
            font-size: 0.9rem;
            font-style: italic;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-number {
            color: #4ecdc4;
            font-size: 1.8rem;
            font-weight: bold;
            display: block;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #aaa;
            font-size: 0.85rem;
            line-height: 1.2;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 20px;
        }

        .action-btn {
            background: rgba(74, 144, 226, 0.8);
            border: none;
            border-radius: 25px;
            color: white;
            padding: 12px 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            backdrop-filter: blur(10px);
        }

        .action-btn:hover {
            background: rgba(74, 144, 226, 1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }

        .action-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .action-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* ğŸ¯ ì½˜í…ì¸  ì¶”ì²œ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .content-recommendation {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 20px;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .content-recommendation::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #7461ee, #ff6b9d, #4ecdc4);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .content-recommendation:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .content-recommendation:hover::before {
            opacity: 1;
        }

        .content-recommendation-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .content-recommendation-title {
            color: #7461ee;
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .content-recommendation-message {
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        /* âœ¨ AI ì˜ìƒ ì½˜í…ì¸  ê·¸ë¦¬ë“œ (ë™ì  ë¡œë”©) */
        .video-content-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .video-content-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .video-content-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(116, 97, 238, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(116, 97, 238, 0.2);
        }

        .video-thumbnail {
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-play-icon {
            position: absolute;
            font-size: 3rem;
            color: white;
            opacity: 0.8;
            z-index: 2;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            transition: all 0.3s ease;
        }

        .video-content-item:hover .video-play-icon {
            opacity: 1;
            transform: scale(1.1);
        }

        .video-info {
            padding: 15px;
        }

        .video-title {
            color: #fff;
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 8px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .video-description {
            color: #ccc;
            font-size: 0.85rem;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .video-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            font-size: 0.75rem;
        }

        .video-channel {
            color: #7461ee;
            font-weight: 500;
        }

        .video-relevance {
            color: #ffc107;
            background: rgba(255, 193, 7, 0.2);
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* ë¡œë”© ìƒíƒœ */
        .video-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            color: #ccc;
            font-size: 1.1rem;
        }

        .video-loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.1);
            border-top: 3px solid #7461ee;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 15px;
        }

        /* ì—ëŸ¬ ìƒíƒœ */
        .video-error {
            text-align: center;
            padding: 30px;
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .retry-btn {
            background: linear-gradient(45deg, #7461ee, #ff6b9d);
            border: none;
            border-radius: 20px;
            color: white;
            padding: 8px 16px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .retry-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(116, 97, 238, 0.4);
        }

        /* ë¯¸ë‹ˆê²Œì„ ì„¹ì…˜ */
        .minigames-section {
            margin-top: 30px;
        }

        .minigames-title {
            color: #4ecdc4;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .minigame-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .minigame-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .minigame-item:hover::before {
            opacity: 1;
        }

        .minigame-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            cursor: pointer;
        }

        .minigame-header:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .minigame-title-text {
            color: #fff;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .minigame-icon {
            font-size: 1.2rem;
            margin-right: 10px;
        }

        .minigame-arrow {
            color: #7461ee;
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .minigame-arrow.expanded {
            transform: rotate(180deg);
        }

        .minigame-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .minigame-content.expanded {
            max-height: 800px;
            padding: 25px;
        }

        .minigame-game-area {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .minigame-description {
            color: #ccc;
            margin-bottom: 15px;
        }

        .minigame-start-btn {
            background: linear-gradient(45deg, #7461ee, #ff6b9d);
            border: none;
            border-radius: 25px;
            color: white;
            padding: 12px 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .minigame-start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(116, 97, 238, 0.4);
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .user-and-roulette-section {
                flex-direction: column;
                margin: 10px;
            }

            .champion-roulette-card {
                flex: none;
            }

            .user-info-card {
                flex-direction: column;
                text-align: center;
            }

            .profile-icon {
                margin-right: 0;
                margin-bottom: 15px;
            }

            .user-info-text h1 {
                font-size: 1.5rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                margin: 10px;
            }

            .video-content-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .comment-card {
                margin: 10px;
                padding: 20px;
            }

            .content-recommendation {
                margin: 20px 10px;
                padding: 20px;
            }

            .galaxy-container {
                margin: 20px 10px;
                min-height: 600px;
            }

            /* ëª¨ë°”ì¼ì—ì„œ ê¶¤ë„ í¬ê¸° ì¡°ì • */
            @keyframes orbit1 {
                from {
                    transform: translate(-50%, -50%) rotate(0deg) translateX(150px) rotate(0deg);
                    opacity: 1;
                }
                to {
                    transform: translate(-50%, -50%) rotate(360deg) translateX(150px) rotate(-360deg);
                    opacity: 1;
                }
            }

            @keyframes orbit2 {
                from {
                    transform: translate(-50%, -50%) rotate(0deg) translateX(220px) rotate(0deg);
                    opacity: 1;
                }
                to {
                    transform: translate(-50%, -50%) rotate(360deg) translateX(220px) rotate(-360deg);
                    opacity: 1;
                }
            }

            @keyframes orbit3 {
                from {
                    transform: translate(-50%, -50%) rotate(0deg) translateX(290px) rotate(0deg);
                    opacity: 1;
                }
                to {
                    transform: translate(-50%, -50%) rotate(360deg) translateX(290px) rotate(-360deg);
                    opacity: 1;
                }
            }

            .orbit-ring.ring-1 {
                width: 300px;
                height: 300px;
            }

            .orbit-ring.ring-2 {
                width: 440px;
                height: 440px;
            }

            .orbit-ring.ring-3 {
                width: 580px;
                height: 580px;
            }

            .champion-card {
                width: 120px;
                height: 180px;
                padding: 10px;
            }

            .champion-avatar {
                width: 50px;
                height: 50px;
            }

            .champion-name {
                font-size: 0.8rem;
            }

            .champion-role {
                font-size: 0.7rem;
                padding: 2px 6px;
            }

            .confidence-score {
                font-size: 0.7rem;
                padding: 2px 6px;
            }

            .player-hub {
                width: 150px;
                height: 150px;
            }

            .player-info {
                width: 130px;
                height: 130px;
            }
        }
    </style>
</head>
<body>
<div class="page-container">
    <div class="top-gradient"></div>

    <div class="header-logo">
        <img src="/images/siteLogo.png" alt="Site Logo" class="logo-icon">
        <img src="/images/smallLogo.png" alt="Luminary" class="small-logo">
    </div>

    <div class="main-content">
        <!-- ğŸ¯ ì‚¬ìš©ì ì •ë³´ì™€ ë£°ë › ì„¹ì…˜ -->
        <div class="user-and-roulette-section">
            <!-- ì‚¬ìš©ì ì •ë³´ ì¹´ë“œ (ì™¼ìª½) -->
            <div class="user-info-card">
                <img th:src="'https://ddragon.leagueoflegends.com/cdn/' + ${version} + '/img/profileicon/'+${userdata.profileIconId}+'.png'"
                     class="profile-icon" alt="í”„ë¡œí•„ ì•„ì´ì½˜">

                <div class="user-info-text">
                    <h1 th:text="${gameName + '#' + tagLine}">Hide on bush#KR1</h1>
                    <div class="user-subtitle">ë‹¹ì‹ ì˜ ë¡¤ ì¸ìƒì„ ë¶„ì„í•´ë“œë¦´ê²Œìš”! âœ¨</div>
                    <div class="user-subtitle" th:if="${userdata != null}" th:text="'ë ˆë²¨ ' + ${userdata.summonerLevel}">ë ˆë²¨ 837</div>
                </div>
            </div>

            <!-- ğŸ¯ ì±”í”¼ì–¸ ë£°ë › ì¹´ë“œ (ì˜¤ë¥¸ìª½) -->
            <div class="champion-roulette-card">
                <div class="roulette-title">ì˜¤ëŠ˜ì˜ ì±”í”¼ì–¸ì€ ë­˜ê¹Œìš”?!</div>

                <div class="roulette-display" id="roulette-display">
                    <div class="roulette-question" id="roulette-question">?</div>
                    <img class="champion-image" id="champion-image" style="display: none;" alt="ì±”í”¼ì–¸">
                </div>

                <div class="roulette-result" id="roulette-result">
                    <div class="champion-name" id="champion-name" style="display: none;"></div>
                    <div class="champion-role" id="champion-role" style="display: none;"></div>
                    <div class="champion-tip" id="champion-tip" style="display: none;"></div>
                </div>

                <button class="roulette-btn" id="roulette-btn" onclick="spinRoulette()">
                    ë£°ë › ëŒë¦¬ê¸°! ğŸ²
                </button>
            </div>
        </div>

        <!-- ğŸŒŒ Cards Galaxy - AI ê¸°ë°˜ ì±”í”¼ì–¸ ì¶”ì²œ ì‹œìŠ¤í…œ -->
        <div class="galaxy-container" id="galaxyContainer">
            <!-- JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
            <div class="loading-placeholder">
                <div style="font-size: 2rem; margin-bottom: 20px;">ğŸŒŒ</div>
                <div style="font-size: 1.2rem; margin-bottom: 10px;">Cards Galaxy ë¡œë”© ì¤‘...</div>
                <div style="color: rgba(255,255,255,0.7);">AI ê¸°ë°˜ ì±”í”¼ì–¸ ì¶”ì²œ ì‹œìŠ¤í…œì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</div>
            </div>
        </div>

        <!-- ì˜¤ëŠ˜ì˜ ë©”ì¸ ë©˜íŠ¸ -->
        <div class="comment-section">
            <div class="comment-card">
                <div class="comment-title">
                    <span class="comment-emoji">ğŸŒ¦ï¸</span>
                    ì˜¤ëŠ˜ì˜ ë‚ ì”¨ & ê²Œì„ ìš´ì„¸
                </div>
                <div class="comment-text" th:utext="${weatherComment + '&lt;br&gt;' + playTimeComment}">
                    "ë¹„ ì˜¤ëŠ” ë‚ ì—” ì§‘ì—ì„œ ë¡¤ì´ ìµœê³ ì£ ~ â˜” (í˜„ì¬ 0Â°C)<br>
                    ì´ ì¶”ì • í”Œë ˆì´ ì‹œê°„ 5,707ì‹œê°„... ì§„ì§œ í”„ë¡œê²Œì´ë¨¸ í•˜ì…”ë„ ë  ê²ƒ ê°™ì€ë°ìš”? ğŸ®"
                </div>
                <div class="comment-subtext">
                    ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ ë¶„ì„ ê²°ê³¼
                </div>
            </div>
        </div>

        <!-- ğŸ¯ AI ê¸°ë°˜ ê°œì¸í™” ì½˜í…ì¸  ì¶”ì²œ ì„¹ì…˜ -->
        <div class="content-recommendation" id="contentRecommendation">
            <div class="content-recommendation-header">
                <div class="content-recommendation-title">
                    <span class="comment-emoji">ğŸ¤–</span>
                    AIê°€ ì¶”ì²œí•˜ëŠ” ë§ì¶¤ ì½˜í…ì¸ 
                </div>
                <div class="content-recommendation-message" id="personalizedMessage">
                    Gemini AIê°€ ë‹¹ì‹ ì˜ í”Œë ˆì´ ìŠ¤íƒ€ì¼ì„ ë¶„ì„í•´ì„œ ë§ì¶¤ ì˜ìƒì„ ì°¾ê³  ìˆì–´ìš”! ğŸ”
                </div>
            </div>

            <div class="video-content-grid" id="videoContentGrid">
                <!-- AI ì˜ìƒ ì¶”ì²œì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                <div class="video-loading">
                    <div class="video-loading-spinner"></div>
                    AIê°€ ë§ì¶¤ ì˜ìƒì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...
                </div>
            </div>

            <div class="minigames-section">
                <div class="minigames-title">ğŸ® ëŒ€ê¸° ì‹œê°„ìš© ë¯¸ë‹ˆê²Œì„</div>

                <div class="minigame-item">
                    <div class="minigame-header" onclick="toggleMinigame('reaction-test')">
                        <div class="minigame-title-text">
                            <span class="minigame-icon">âš¡</span>
                            ë°˜ì‘ì†ë„ í…ŒìŠ¤íŠ¸
                        </div>
                        <div class="minigame-arrow" id="reaction-test-arrow">â–¼</div>
                    </div>
                    <div class="minigame-content" id="reaction-test-content">
                        <div class="minigame-game-area" id="reaction-test-area">
                            <div class="minigame-description">í”„ë¡œê²Œì´ë¨¸ ìˆ˜ì¤€ì˜ ë°˜ì‘ì†ë„ë¥¼ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”!</div>
                            <button class="minigame-start-btn" onclick="startReactionTest('reaction-test-area')">í…ŒìŠ¤íŠ¸ ì‹œì‘</button>
                        </div>
                    </div>
                </div>

                <div class="minigame-item">
                    <div class="minigame-header" onclick="toggleMinigame('snake-game')">
                        <div class="minigame-title-text">
                            <span class="minigame-icon">ğŸ</span>
                            ë±€ ê²Œì„
                        </div>
                        <div class="minigame-arrow" id="snake-game-arrow">â–¼</div>
                    </div>
                    <div class="minigame-content" id="snake-game-content">
                        <div class="minigame-game-area" id="snake-game-area">
                            <div class="minigame-description">ë±€ ê²Œì„ìœ¼ë¡œ ì§‘ì¤‘ë ¥ê³¼ ìˆœë°œë ¥ì„ í•¨ê»˜ ê¸°ë¥´ëŠ” ê²Œì„!</div>
                            <button class="minigame-start-btn" onclick="startSnakeGame('snake-game-area')">ê²Œì„ ì‹œì‘</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- í†µê³„ ê·¸ë¦¬ë“œ -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number" th:text="${estimatedHours}">5707</span>
                <div class="stat-label">ì¶”ì • í”Œë ˆì´ ì‹œê°„<br>(ì‹œê°„)</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" th:text="${winRate != null ? winRate + '%' : 'ì •ë³´ì—†ìŒ'}">57.2%</span>
                <div class="stat-label">ì „ì²´ ìŠ¹ë¥ </div>
            </div>
            <div class="stat-card">
                <span class="stat-number" th:text="${averageKDA != null ? averageKDA : 'ì •ë³´ì—†ìŒ'}">3.44</span>
                <div class="stat-label">ìµœê·¼ í‰ê·  KDA</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" th:text="${mainChampion != null ? mainChampion : 'ì •ë³´ì—†ìŒ'}">Taliyah</span>
                <div class="stat-label">ì£¼ ì±”í”¼ì–¸</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" th:text="${tier != null ? tier : 'ì–¸ë­'}">CHALLENGER</span>
                <div class="stat-label">í˜„ì¬ í‹°ì–´</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" th:text="${lp != null ? lp + 'LP' : '0LP'}">1223LP</span>
                <div class="stat-label">ë¦¬ê·¸ í¬ì¸íŠ¸</div>
            </div>
        </div>

        <!-- ê°œì¸í™” ë©˜íŠ¸ë“¤ -->
        <div class="comment-section">
            <div class="comment-card">
                <div class="comment-title">
                    <span class="comment-emoji">ğŸ®</span>
                    í”Œë ˆì´ ìŠ¤íƒ€ì¼ ë¶„ì„
                </div>
                <div class="comment-text" th:utext="${championComment + '&lt;br&gt;' + kdaComment}">
                    "Taliyah ì¥ì¸ì´ì‹œêµ°ìš”! ë©‹ìˆì–´ìš”! ğŸ‘<br>
                    KDA 3.44... ê³ ìˆ˜ì‹œë„¤ìš”! ğŸ”¥"
                </div>
                <div class="comment-subtext">
                    ìµœê·¼ 7ê²½ê¸° ê¸°ì¤€ ë¶„ì„ ê²°ê³¼
                </div>
            </div>

            <div class="comment-card">
                <div class="comment-title">
                    <span class="comment-emoji">ğŸ†</span>
                    ë­í¬ & ìŠ¹ë¥  ë¶„ì„
                </div>
                <div class="comment-text" th:utext="${rankComment + '&lt;br&gt;' + winRateComment}">
                    "ì™€... ê³ ìˆ˜ì‹œë„¤ìš”! ì¡´ê²½í•©ë‹ˆë‹¤! ğŸ†<br>
                    ìŠ¹ë¥ ì´ ì¢‹ìœ¼ì‹œë„¤ìš”! ë¶€ëŸ½ìŠµë‹ˆë‹¤ ğŸ˜Š"
                </div>
                <div class="comment-subtext" th:text="${wins != null ? wins + 'ìŠ¹ ' + losses + 'íŒ¨ (LP: ' + lp + ')' : 'ë­í¬ ê²Œì„ ê¸°ë¡ ê¸°ì¤€'}">
                    250ìŠ¹ 187íŒ¨ (LP: 1223)
                </div>
            </div>

            <div class="comment-card">
                <div class="comment-title">
                    <span class="comment-emoji">ğŸ“ˆ</span>
                    ìµœê·¼ ì„±ê³¼ ë¶„ì„
                </div>
                <div class="comment-text" th:text="${recentPerformanceComment}">
                    "ìµœê·¼ 7ê²½ê¸° ì¤‘ 5ìŠ¹! ì»¨ë””ì…˜ì´ ì¢‹ìœ¼ì‹œë„¤ìš”! ğŸ”¥"
                </div>
                <div class="comment-subtext" th:text="'ìµœê·¼ ' + ${recentTotal} + 'ê²½ê¸° ì¤‘ ' + ${recentWins} + 'ìŠ¹'">
                    ìµœê·¼ 7ê²½ê¸° ì¤‘ 5ìŠ¹
                </div>
            </div>

            <div class="comment-card">
                <div class="comment-title">
                    <span class="comment-emoji">ğŸ’¡</span>
                    ë§ì¶¤ ì¡°ì–¸
                </div>
                <div class="comment-text">
                    <span th:if="${averageKDA != null and averageKDA < 1.5}">ë°ìŠ¤ë¥¼ ì¤„ì´ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš”! ì•ˆì „í•œ ìœ„ì¹˜ì—ì„œ í”Œë ˆì´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš” ğŸ›¡ï¸</span>
                    <span th:if="${winRate != null and winRate < 50}">ì—°ìŠµ ëª¨ë“œì—ì„œ CS ì—°ìŠµì„ í•´ë³´ì‹œë©´ ì‹¤ë ¥ í–¥ìƒì— ë„ì›€ì´ ë  ê±°ì˜ˆìš”! ğŸ“ˆ</span>
                    <span th:if="${tier != null and (tier == 'BRONZE' or tier == 'SILVER')}">ì™€ë“œë¥¼ ë” ë§ì´ ì„¤ì¹˜í•´ì„œ ì‹œì•¼ë¥¼ í™•ë³´í•´ë³´ì„¸ìš”! ğŸ‘€</span>
                    <span th:if="${averageKDA != null and averageKDA >= 1.5 and winRate != null and winRate >= 50}">ê³„ì† ì§€ê¸ˆì²˜ëŸ¼ í•˜ì‹œë©´ ë”ìš± ì„±ì¥í•˜ì‹¤ ê±°ì˜ˆìš”! í™”ì´íŒ…! ğŸ”¥</span>
                </div>
                <div class="comment-subtext">
                    ì‹¤ë ¥ í–¥ìƒì„ ìœ„í•œ ì¡°ì–¸
                </div>
            </div>
        </div>

        <!-- ì•¡ì…˜ ë²„íŠ¼ë“¤ -->
        <div class="action-buttons">
            <a href="/result" class="action-btn secondary">ì „ì  ë‹¤ì‹œ ë³´ê¸°</a>
            <a href="/" class="action-btn secondary">ìƒˆë¡œìš´ ê²€ìƒ‰</a>
        </div>
    </div>
</div>

<!-- ğŸŒŒ Cards Galaxy ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ -->
<script th:inline="javascript">
    // Thymeleaf ë³€ìˆ˜ë“¤ì„ JavaScript ì „ì—­ ë³€ìˆ˜ë¡œ ì„¤ì •
    window.championRecommendations = /*[[${championRecommendations}]]*/ null;
    window.playerData = {
        name: /*[[${gameName}]]*/ 'Player',
        tagLine: /*[[${tagLine}]]*/ 'TAG',
        winRate: /*[[${winRate}]]*/ 67,
        averageKDA: /*[[${averageKDA}]]*/ 2.4,
        tier: /*[[${tier}]]*/ 'GOLD',
        level: /*[[${userdata?.summonerLevel}]]*/ 100
    };
    window.currentVersion = /*[[${version}]]*/ '14.23.1';

    console.log('ğŸ”§ ì „ì—­ ë³€ìˆ˜ ì„¤ì • ì™„ë£Œ:', {
        championRecommendations: window.championRecommendations,
        playerData: window.playerData,
        currentVersion: window.currentVersion
    });
</script>

<script>
    // ğŸ¥ AI ê¸°ë°˜ ì˜ìƒ ì¶”ì²œ ì‹œìŠ¤í…œ
    class AIVideoRecommendationSystem {
        constructor(playerName) {
            this.playerName = playerName;
            this.apiEndpoint = '/api/content/personalized';
            this.retryCount = 0;
            this.maxRetries = 3;
        }

        /**
         * ğŸš€ AI ì˜ìƒ ì¶”ì²œ ë¡œë“œ
         */
        async loadVideoRecommendations() {
            try {
                console.log('ğŸ¤– AI ì˜ìƒ ì¶”ì²œ ë¡œë“œ ì‹œì‘:', this.playerName);

                const response = await fetch(`${this.apiEndpoint}?playerName=${encodeURIComponent(this.playerName)}`);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                console.log('âœ… AI ì˜ìƒ ë°ì´í„° ë¡œë“œ ì„±ê³µ:', data);

                this.renderVideoRecommendations(data);
                this.updatePersonalizedMessage(data.personalizedMessage);

            } catch (error) {
                console.error('âŒ AI ì˜ìƒ ë¡œë“œ ì‹¤íŒ¨:', error);
                this.handleVideoLoadError(error);
            }
        }

        /**
         * ğŸ¨ ì˜ìƒ ì¶”ì²œ ë Œë”ë§
         */
        renderVideoRecommendations(data) {
            const container = document.getElementById('videoContentGrid');
            if (!container) return;

            if (!data.videoContents || data.videoContents.length === 0) {
                this.renderNoVideosState();
                return;
            }

            // ì˜ìƒ ì¹´ë“œë“¤ ìƒì„±
            const videoCards = data.videoContents.map(video => this.createVideoCard(video)).join('');
            container.innerHTML = videoCards;

            // ìˆœì°¨ì  ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
            this.animateVideoCards();
        }

        /**
         * ğŸ¬ ì˜ìƒ ì¹´ë“œ ìƒì„±
         */
        createVideoCard(video) {
            const thumbnailUrl = video.thumbnailUrl || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMyMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMTgwIiBmaWxsPSIjNjY3ZWVhIiByeD0iMTAiLz4KPHN2ZyB4PSIxMjAiIHk9IjYwIiB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSI+Cjxwb2x5Z29uIHBvaW50cz0iMjAsMTAgNjAsMzAgMjAsNTAiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiLz4KPC9zdmc+Cjx0ZXh0IHg9IjE2MCIgeT0iMTQwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkFJIOy2lOyynCDrr7jsp4A8L3RleHQ+Cjwvc3ZnPg==';
            const channelName = video.channelTitle || 'AI ì¶”ì²œ';
            const relevanceScore = video.relevanceScore ? Math.round(video.relevanceScore * 100) : 85;
            const shortTitle = video.title.length > 50 ? video.title.substring(0, 50) + '...' : video.title;
            const shortDescription = video.description.length > 80 ? video.description.substring(0, 80) + '...' : video.description;

            return `
                <div class="video-content-item" onclick="openVideo('${video.url}')">
                    <div class="video-thumbnail">
                        <img src="${thumbnailUrl}" alt="${video.title}"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMyMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMTgwIiBmaWxsPSIjNjY3ZWVhIiByeD0iMTAiLz4KPHN2ZyB4PSIxMjAiIHk9IjYwIiB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSI+Cjxwb2x5Z29uIHBvaW50cz0iMjAsMTAgNjAsMzAgMjAsNTAiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiLz4KPC9zdmc+Cjx0ZXh0IHg9IjE2MCIgeT0iMTQwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkFJIOy2lOyynCDrr7jsp4A8L3RleHQ+Cjwvc3ZnPg=='">
                        <div class="video-play-icon">â–¶</div>
                    </div>
                    <div class="video-info">
                        <div class="video-title">${shortTitle}</div>
                        <div class="video-description">${shortDescription}</div>
                        <div class="video-meta">
                            <div class="video-channel">${channelName}</div>
                            <div class="video-relevance">${relevanceScore}% ì¶”ì²œ</div>
                        </div>
                    </div>
                </div>
            `;
        }

        /**
         * ğŸ“º ì˜ìƒ ì—´ê¸°
         */
        openVideo(url) {
            if (url && url.startsWith('http')) {
                window.open(url, '_blank');
            } else {
                console.error('ìœ íš¨í•˜ì§€ ì•Šì€ URL:', url);
                alert('ì˜ìƒì„ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            }
        }

        /**
         * ğŸ’« ì˜ìƒ ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜
         */
        animateVideoCards() {
            const cards = document.querySelectorAll('.video-content-item');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';

                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 200 + 300);
            });
        }

        /**
         * ğŸ’¬ ê°œì¸í™” ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
         */
        updatePersonalizedMessage(message) {
            const messageElement = document.getElementById('personalizedMessage');
            if (messageElement && message) {
                messageElement.textContent = message;
            }
        }

        /**
         * ğŸš« ì˜ìƒ ì—†ìŒ ìƒíƒœ ë Œë”ë§
         */
        renderNoVideosState() {
            const container = document.getElementById('videoContentGrid');
            container.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #ccc;">
                    <div style="font-size: 3rem; margin-bottom: 20px;">ğŸ¤–</div>
                    <div style="font-size: 1.2rem; margin-bottom: 10px;">AIê°€ ì•„ì§ ë¶„ì„ ì¤‘ì´ì—ìš”!</div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">í”Œë ˆì´ ë°ì´í„°ë¥¼ ë” ìˆ˜ì§‘í•œ í›„ ë§ì¶¤ ì˜ìƒì„ ì¶”ì²œí•´ë“œë¦´ê²Œìš”.</div>
                </div>
            `;
        }

        /**
         * âŒ ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬
         */
        handleVideoLoadError(error) {
            this.retryCount++;

            if (this.retryCount <= this.maxRetries) {
                console.log(`ğŸ”„ ì¬ì‹œë„ ${this.retryCount}/${this.maxRetries}...`);
                setTimeout(() => this.loadVideoRecommendations(), 2000 * this.retryCount);
                return;
            }

            const container = document.getElementById('videoContentGrid');
            container.innerHTML = `
                <div class="video-error" style="grid-column: 1 / -1;">
                    <div style="font-size: 2rem; margin-bottom: 15px;">âš ï¸</div>
                    <div style="font-size: 1.1rem; margin-bottom: 10px;">AI ì˜ìƒ ì¶”ì²œì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ì–´ìš”</div>
                    <div style="font-size: 0.9rem; margin-bottom: 15px;">ë„¤íŠ¸ì›Œí¬ë¥¼ í™•ì¸í•˜ê±°ë‚˜ ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</div>
                    <button class="retry-btn" onclick="retryVideoLoad()">ë‹¤ì‹œ ì‹œë„</button>
                </div>
            `;
        }
    }

    // ğŸŒŒ ë©”ì¸ ì´ˆê¸°í™” í•¨ìˆ˜
    document.addEventListener('DOMContentLoaded', function() {
        console.log('ğŸŒŒ ê°œì¸í™” ë¶„ì„ í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');

        // ì „ì—­ ë³€ìˆ˜ ì„¤ì • ë° ê²€ì¦
        window.playerData = window.playerData || {
            name: /*[[${gameName}]]*/ 'Player',
            level: /*[[${userdata?.summonerLevel}]]*/ 100,
            tier: /*[[${tier}]]*/ 'GOLD',
            winRate: /*[[${winRate}]]*/ 67,
            averageKDA: /*[[${averageKDA}]]*/ 2.4
        };

        window.currentVersion = window.currentVersion || /*[[${version}]]*/ '14.23.1';

        console.log('ğŸ”§ ë°ì´í„° í™•ì¸:', {
            playerData: window.playerData,
            currentVersion: window.currentVersion,
            championRecommendations: window.championRecommendations ? 'ìˆìŒ' : 'ì—†ìŒ'
        });

        // AI ì˜ìƒ ì¶”ì²œ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
        window.aiVideoSystem = new AIVideoRecommendationSystem(window.playerData.name);

        // ì§€ì—° í›„ ì´ˆê¸°í™” (DOM ì™„ì „ ë¡œë“œ ëŒ€ê¸°)
        setTimeout(() => {
            try {
                // Cards Galaxy ì‹œìŠ¤í…œ ì´ˆê¸°í™”
                initializeCardsGalaxy();

                // AI ì˜ìƒ ì¶”ì²œ ë¡œë“œ
                window.aiVideoSystem.loadVideoRecommendations();

            } catch (error) {
                console.error('âŒ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                createFallbackSystems();
            }
        }, 1500); // 1.5ì´ˆ ì§€ì—°
    });

    /**
     * ğŸŒŒ Cards Galaxy ì´ˆê¸°í™”
     */
    function initializeCardsGalaxy() {
        try {
            // 1ì°¨: ì›ë³¸ CardsGalaxySystem ì‹œë„
            if (typeof CardsGalaxySystem !== 'undefined' && window.championRecommendations) {
                console.log('âœ… ì›ë³¸ Cards Galaxy ì‹œìŠ¤í…œ ì‚¬ìš©');
                window.galaxySystem = new CardsGalaxySystem(
                    window.championRecommendations,
                    window.playerData,
                    window.currentVersion
                );
                return;
            }

            // 2ì°¨: CardsGalaxySystemì´ ìˆì§€ë§Œ ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° API ì‹œë„
            if (typeof CardsGalaxySystem !== 'undefined') {
                console.log('ğŸ”„ APIë¥¼ í†µí•œ ë°ì´í„° ë¡œë“œ ì‹œë„');
                fetchGalaxyDataAndInit();
                return;
            }

            // 3ì°¨: ì™„ì „ í´ë°± ì‹œìŠ¤í…œ ì‚¬ìš©
            console.log('ğŸ›¡ï¸ í´ë°± ì‹œìŠ¤í…œ ì‚¬ìš©');
            createFallbackGalaxySystem();

        } catch (error) {
            console.error('âŒ Cards Galaxy ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
            createFallbackGalaxySystem();
        }
    }

    /**
     * ğŸ›¡ï¸ í´ë°± ì‹œìŠ¤í…œë“¤ ìƒì„±
     */
    function createFallbackSystems() {
        createFallbackGalaxySystem();
        createFallbackVideoRecommendations();
    }

    /**
     * ğŸ“º í´ë°± ì˜ìƒ ì¶”ì²œ ìƒì„±
     */
    function createFallbackVideoRecommendations() {
        const container = document.getElementById('videoContentGrid');
        if (!container) return;

        const fallbackVideos = [
            {
                title: "ë¡¤ ê¸°ì´ˆ ê°€ì´ë“œ - ì´ˆë³´ìë¥¼ ìœ„í•œ ì™„ë²½ ì •ë¦¬",
                description: "ë¦¬ê·¸ì˜¤ë¸Œë ˆì „ë“œë¥¼ ì²˜ìŒ ì‹œì‘í•˜ëŠ” ë¶„ë“¤ì„ ìœ„í•œ í•µì‹¬ ê°€ì´ë“œì…ë‹ˆë‹¤.",
                url: "https://youtube.com/watch?v=guide1",
                channelTitle: "LoL Guide",
                relevanceScore: 0.85
            },
            {
                title: "ë­í¬ ìŠ¹ê¸‰ì„ ìœ„í•œ í•„ìˆ˜ íŒ ëª¨ìŒ",
                description: "ìƒìœ„ í‹°ì–´ë¡œ ì˜¬ë¼ê°€ê¸° ìœ„í•œ ì‹¤ì „ ë…¸í•˜ìš°ë¥¼ ê³µê°œí•©ë‹ˆë‹¤.",
                url: "https://youtube.com/watch?v=guide2",
                channelTitle: "Pro Gaming",
                relevanceScore: 0.90
            }
        ];

        const videoCards = fallbackVideos.map(video => window.aiVideoSystem.createVideoCard(video)).join('');
        container.innerHTML = videoCards;

        // ì• ë‹ˆë©”ì´ì…˜ ì ìš©
        window.aiVideoSystem.animateVideoCards();

        // ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
        const messageElement = document.getElementById('personalizedMessage');
        if (messageElement) {
            messageElement.textContent = 'ê¸°ë³¸ ì¶”ì²œ ì˜ìƒì„ ì¤€ë¹„í–ˆì–´ìš”! ë” ì •í™•í•œ ì¶”ì²œì„ ìœ„í•´ì„œëŠ” ë” ë§ì€ ê²Œì„ ë°ì´í„°ê°€ í•„ìš”í•´ìš” ğŸ“Š';
        }
    }

    // ğŸŒŒ í´ë°± Cards Galaxy ì‹œìŠ¤í…œ (ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥)
    function createFallbackGalaxySystem() {
        console.log('ğŸ›¡ï¸ í´ë°± Cards Galaxy ì‹œìŠ¤í…œ ì‹¤í–‰');

        const container = document.getElementById('galaxyContainer');
        if (!container) {
            console.error('galaxyContainerë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
            return;
        }

        // ê¸°ë³¸ êµ¬ì¡° ìƒì„±
        container.innerHTML = `
            <div class="stars"></div>
            <div class="orbit-ring ring-1"></div>
            <div class="orbit-ring ring-2"></div>
            <div class="orbit-ring ring-3"></div>
            <div class="champion-cards-container" id="championCards"></div>
            <div class="player-hub">
                <div class="player-info">
                    <div style="color: white; font-size: 1.1rem; font-weight: bold; margin-bottom: 5px;">${window.playerData.name}</div>
                    <div style="color: #4ecdc4; font-size: 0.9rem; margin-bottom: 3px;">ë ˆë²¨ ${window.playerData.level}</div>
                    <div style="color: #ffc107; font-size: 0.8rem; margin-bottom: 5px;">${window.playerData.tier}</div>
                    <div style="color: rgba(255,255,255,0.7); font-size: 0.7rem;">${window.playerData.winRate}% ìŠ¹ë¥ </div>
                </div>
            </div>
        `;

        // ë³„ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
        createStars();

        // ì±”í”¼ì–¸ ì¹´ë“œ ìƒì„±
        createChampionCards();

        console.log('âœ… í´ë°± Cards Galaxy ì‹œìŠ¤í…œ ì™„ë£Œ');
    }

    function createStars() {
        const starsContainer = document.querySelector('#galaxyContainer .stars');
        if (!starsContainer) return;

        for (let i = 0; i < 80; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            star.style.animationDuration = (Math.random() * 2 + 1) + 's';
            starsContainer.appendChild(star);
        }
    }

    function createChampionCards() {
        const container = document.getElementById('championCards');
        if (!container) return;

        // APIì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„° ìš°ì„  ì‚¬ìš©, ì—†ìœ¼ë©´ Mock ë°ì´í„°
        let championData = [];

        // ë°±ì—”ë“œ ì¶”ì²œ ë°ì´í„° í™•ì¸
        if (window.championRecommendations && window.championRecommendations.recommendations) {
            championData = window.championRecommendations.recommendations.slice(0, 12).map(rec => ({
                name: rec.championName,
                role: rec.primaryRole,
                confidence: Math.round(rec.confidenceScore * 100),
                tags: generateChampionTags(rec)
            }));
        } else {
            // Mock ë°ì´í„° ì‚¬ìš© (12ê°œë¡œ í™•ì¥)
            championData = [
                { name: 'Jinx', role: 'ADC', confidence: 92, tags: ['meta', 'personal'] },
                { name: 'Yasuo', role: 'MID', confidence: 85, tags: ['style'] },
                { name: 'Thresh', role: 'SUPPORT', confidence: 88, tags: ['meta'] },
                { name: 'Lee Sin', role: 'JUNGLE', confidence: 90, tags: ['personal'] },
                { name: 'Garen', role: 'TOP', confidence: 83, tags: ['style'] },
                { name: 'Ahri', role: 'MID', confidence: 87, tags: ['meta'] },
                { name: 'Caitlyn', role: 'ADC', confidence: 84, tags: ['personal'] },
                { name: 'Leona', role: 'SUPPORT', confidence: 89, tags: ['meta', 'style'] },
                { name: 'Graves', role: 'JUNGLE', confidence: 86, tags: ['meta'] },
                { name: 'Fiora', role: 'TOP', confidence: 82, tags: ['style'] },
                { name: 'Lux', role: 'MID', confidence: 81, tags: ['personal'] },
                { name: 'Braum', role: 'SUPPORT', confidence: 80, tags: ['style'] }
            ];
        }

        console.log('ğŸ“Š ì±”í”¼ì–¸ ë°ì´í„°:', championData);

        championData.forEach((champion, index) => {
            const card = document.createElement('div');
            card.className = 'champion-card';

            // ê¶¤ë„ ë°°ì¹˜ (4ê°œì”© 3ê°œ ê¶¤ë„ì— ë°°ì¹˜)
            const orbit = Math.floor(index / 4) + 1; // 1, 2, 3
            card.classList.add(`orbit-${orbit}`);

            // ê¶¤ë„ ë‚´ ì‹œì‘ ê°ë„ ì„¤ì • (ê° ì¹´ë“œë§ˆë‹¤ 90ë„ì”© ì°¨ì´)
            const angleInOrbit = (index % 4) * 90;
            card.style.setProperty('--start-angle', `${angleInOrbit}deg`);

            // ì¹´ë“œ ë‚´ìš© ìƒì„±
            const tags = champion.tags.map(tag =>
                `<span class="champion-tag ${tag}">${getTagLabel(tag)}</span>`
            ).join('');

            card.innerHTML = `
                <div class="champion-avatar">
                    <img src="https://ddragon.leagueoflegends.com/cdn/${window.currentVersion}/img/champion/${champion.name}.png"
                         alt="${champion.name}"
                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNzAiIHZpZXdCb3g9IjAgMCA3MCA3MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjNjY3ZWVhIiByeD0iMzUiLz4KPHRleHQgeD0iMzUiIHk9IjQwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIyMCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPj88L3RleHQ+Cjwvc3ZnPg=='">
                </div>
                <div class="champion-name">${champion.name}</div>
                <div class="champion-role">${champion.role}</div>
                <div class="confidence-score">${champion.confidence}%</div>
                <div class="champion-tags">${tags}</div>
            `;

            // í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
            card.addEventListener('click', () => showChampionDetails(champion));

            container.appendChild(card);

            // ìˆœì°¨ì  ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜
            setTimeout(() => {
                card.classList.add('visible');
            }, index * 200 + 1500); // 1.5ì´ˆ í›„ë¶€í„° ì‹œì‘
        });
    }

    function generateChampionTags(rec) {
        const tags = [];
        if (rec.personalStats) tags.push('personal');
        if (rec.metaStrength >= 8.0) tags.push('meta');
        if (rec.styleMatch >= 0.8) tags.push('style');
        return tags;
    }

    function getTagLabel(tag) {
        const labels = {
            'meta': 'ë©”íƒ€',
            'personal': 'ê°œì¸',
            'style': 'ìŠ¤íƒ€ì¼'
        };
        return labels[tag] || tag;
    }

    function showChampionDetails(champion) {
        alert(`ğŸŒŸ ${champion.name}\në¼ì¸: ${champion.role}\nì¶”ì²œë„: ${champion.confidence}%\n\nOP.GGì—ì„œ ë” ìì„¸í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”!`);

        // OP.GG ë§í¬ ì—´ê¸° (ì„ íƒì‚¬í•­)
        if (confirm('OP.GGì—ì„œ ì´ ì±”í”¼ì–¸ì˜ ìƒì„¸ ì •ë³´ë¥¼ ë³´ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            window.open(`https://www.op.gg/champions/${champion.name.toLowerCase()}/build`, '_blank');
        }
    }

    // APIë¥¼ í†µí•œ ë°ì´í„° ë¡œë“œ ë° ì´ˆê¸°í™”
    async function fetchGalaxyDataAndInit() {
        try {
            const playerName = window.playerData.name || 'Player';
            const apiUrl = `/api/v2/recommendations/galaxy?playerName=${encodeURIComponent(playerName)}&count=12`;

            console.log('ğŸ“¡ API ìš”ì²­:', apiUrl);

            const response = await fetch(apiUrl);

            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }

            const data = await response.json();
            console.log('ğŸ“¡ API ë°ì´í„° ë¡œë“œ ì„±ê³µ:', data);

            if (!data.champions || data.champions.length === 0) {
                throw new Error('API ì‘ë‹µì— ì±”í”¼ì–¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
            }

            // API ë°ì´í„°ë¥¼ recommendationResult í˜•íƒœë¡œ ë³€í™˜
            const apiRecommendations = {
                recommendations: data.champions.map(champion => ({
                    championName: champion.name,
                    primaryRole: champion.role,
                    confidenceScore: champion.confidence / 100,
                    metaStrength: champion.tier === 'S' ? 9 : champion.tier === 'A' ? 7 : 5,
                    styleMatch: champion.styleMatch / 100,
                    personalStats: champion.type === 'personal' ? {} : null
                })),
                personalizedMessage: data.message || 'AI ì¶”ì²œ ì±”í”¼ì–¸ë“¤ì„ ë§Œë‚˜ë³´ì„¸ìš”!',
                playerProfile: {
                    playStyle: { primaryStyle: data.playerStyle || 'BALANCED' }
                }
            };

            // Cards Galaxy ì‹œìŠ¤í…œ ì´ˆê¸°í™”
            window.galaxySystem = new CardsGalaxySystem(
                apiRecommendations,
                window.playerData,
                window.currentVersion
            );

            console.log('âœ… API ê¸°ë°˜ Cards Galaxy ì´ˆê¸°í™” ì™„ë£Œ');

        } catch (error) {
            console.error('âŒ API ë¡œë“œ ì‹¤íŒ¨, í´ë°± ì‹œìŠ¤í…œ ì‚¬ìš©:', error);
            createFallbackGalaxySystem();
        }
    }

    // ì „ì—­ í•¨ìˆ˜ë“¤
    window.openVideo = function(url) {
        if (window.aiVideoSystem) {
            window.aiVideoSystem.openVideo(url);
        }
    };

    window.retryVideoLoad = function() {
        if (window.aiVideoSystem) {
            window.aiVideoSystem.retryCount = 0;
            window.aiVideoSystem.loadVideoRecommendations();
        }
    };

    // ì „ì—­ ë””ë²„ê¹… í•¨ìˆ˜ë“¤
    window.galaxyDebug = {
        reload: function() {
            console.log('ğŸ”„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨');
            location.reload();
        },

        testVideoAPI: function() {
            console.log('ğŸ§ª ì˜ìƒ API í…ŒìŠ¤íŠ¸ ì‹œì‘');
            fetch('/api/content/personalized?playerName=test')
                .then(response => response.json())
                .then(data => {
                    console.log('âœ… ì˜ìƒ API í…ŒìŠ¤íŠ¸ ê²°ê³¼:', data);
                    alert('ì˜ìƒ API í…ŒìŠ¤íŠ¸ ì„±ê³µ! ì½˜ì†”ì„ í™•ì¸í•˜ì„¸ìš”.');
                })
                .catch(error => {
                    console.error('âŒ ì˜ìƒ API í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
                    alert('ì˜ìƒ API í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ' + error.message);
                });
        },

        getSystemInfo: function() {
            const info = {
                galaxySystem: window.galaxySystem ? 'ìˆìŒ' : 'ì—†ìŒ',
                aiVideoSystem: window.aiVideoSystem ? 'ìˆìŒ' : 'ì—†ìŒ',
                CardsGalaxySystem: typeof CardsGalaxySystem,
                playerData: window.playerData,
                championRecommendations: window.championRecommendations ? 'ìˆìŒ' : 'ì—†ìŒ',
                currentVersion: window.currentVersion
            };
            console.log('ğŸ” ì‹œìŠ¤í…œ ì •ë³´:', info);
            return info;
        },

        forceFallback: function() {
            console.log('ğŸ›¡ï¸ ê°•ì œ í´ë°± ì‹¤í–‰');
            createFallbackSystems();
        },

        recreate: function() {
            console.log('ğŸ”„ ì‹œìŠ¤í…œ ì¬ìƒì„±');
            const container = document.getElementById('galaxyContainer');
            if (container) {
                container.innerHTML = `
                    <div class="loading-placeholder">
                        <div style="font-size: 2rem; margin-bottom: 20px;">ğŸŒŒ</div>
                        <div style="font-size: 1.2rem; margin-bottom: 10px;">ì‹œìŠ¤í…œ ì¬ë¡œë”© ì¤‘...</div>
                        <div style="color: rgba(255,255,255,0.7);">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</div>
                    </div>
                `;

                setTimeout(() => {
                    createFallbackSystems();
                }, 1000);
            }
        }
    };

    // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ì •ë¦¬
    window.addEventListener('beforeunload', function() {
        if (window.galaxySystem && typeof window.galaxySystem.destroy === 'function') {
            window.galaxySystem.destroy();
        }
    });

    console.log('ğŸ® AI ê¸°ë°˜ ê°œì¸í™” ë¶„ì„ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
    console.log('ğŸ’¡ ë””ë²„ê¹…: window.galaxyDebug.getSystemInfo() ë¡œ ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸');
    console.log('ğŸ”§ ê°•ì œ í´ë°±: window.galaxyDebug.forceFallback() ì‹¤í–‰');
    console.log('ğŸ”„ ì¬ìƒì„±: window.galaxyDebug.recreate() ì‹¤í–‰');
    console.log('ğŸ“º ì˜ìƒ API í…ŒìŠ¤íŠ¸: window.galaxyDebug.testVideoAPI() ì‹¤í–‰');

    // ===== ğŸ¯ ì±”í”¼ì–¸ ë£°ë › ì‹œìŠ¤í…œ =====
    const championData = {
        // ========== ADC ì±”í”¼ì–¸ë“¤ ==========
        'Jinx': { role: 'ADC', tip: 'ë¯¸ë‹ˆì–¸ì„ ë§ì´ ì¡ê³  ì„±ì¥í•˜ì„¸ìš”!' },
        'Caitlyn': { role: 'ADC', tip: 'ì›ê±°ë¦¬ì—ì„œ ê²¬ì œí•˜ë©° ì•ˆì „í•˜ê²Œ!' },
        'Ezreal': { role: 'ADC', tip: 'QìŠ¤í‚¬ë¡œ ê¾¸ì¤€íˆ ê²¬ì œí•´ë³´ì„¸ìš”!' },
        'Vayne': { role: 'ADC', tip: 'í›„ë°˜ì— ê°•í•œ ì±”í”¼ì–¸ì´ì—ìš”!' },
        'Ashe': { role: 'ADC', tip: 'ê¶ê·¹ê¸°ë¡œ ì´ë‹ˆì‹œë¥¼ ê±¸ì–´ë³´ì„¸ìš”!' },
        'Jhin': { role: 'ADC', tip: '4ë²ˆì§¸ ì´ì•Œì˜ ìœ„ë ¥ì„ í™œìš©í•˜ì„¸ìš”!' },
        'Lucian': { role: 'ADC', tip: 'ê¸°ë™ì„±ì„ ì‚´ë ¤ í‚¬ì„ ë”°ë³´ì„¸ìš”!' },
        'Kai\'Sa': { role: 'ADC', tip: 'ì§„í™”í•œ ìŠ¤í‚¬ë“¤ì˜ ì‹œë„ˆì§€ë¥¼ ë…¸ë ¤ë³´ì„¸ìš”!' },
        'Miss Fortune': { role: 'ADC', tip: 'ê¶ê·¹ê¸° íƒ„ë§‰ìœ¼ë¡œ íŒ€íŒŒì´íŠ¸ë¥¼ ì œì••í•˜ì„¸ìš”!' },
        'Tristana': { role: 'ADC', tip: 'ì í”„ë¡œ ìœ„í—˜ì—ì„œ íƒˆì¶œí•˜ì„¸ìš”!' },

        // ========== SUPPORT ì±”í”¼ì–¸ë“¤ ==========
        'Thresh': { role: 'SUPPORT', tip: 'ê°ˆê³ ë¦¬ë¡œ ì ì„ ëŒì–´ì™€ë³´ì„¸ìš”!' },
        'Leona': { role: 'SUPPORT', tip: 'íƒœì–‘ì˜ í˜ìœ¼ë¡œ ì•„êµ°ì„ ë³´í˜¸í•˜ì„¸ìš”!' },
        'Soraka': { role: 'SUPPORT', tip: 'íë¡œ ì•„êµ°ì„ ì‚´ë ¤ì£¼ì„¸ìš”!' },
        'Lulu': { role: 'SUPPORT', tip: 'í´ë¦¬ëª¨í”„ë¡œ ì ì„ ë¬´ë ¥í™”ì‹œí‚¤ì„¸ìš”!' },
        'Nautilus': { role: 'SUPPORT', tip: 'ì•µì»¤ë¡œ ì ì„ ì¡ì•„ë„ì„¸ìš”!' },
        'Blitzcrank': { role: 'SUPPORT', tip: 'ë¡œì¼“ ì†ìœ¼ë¡œ ì ì„ ë‹¹ê²¨ì˜¤ì„¸ìš”!' },
        'Yuumi': { role: 'SUPPORT', tip: 'ì•„êµ°ì—ê²Œ ë¶™ì–´ì„œ ë²„í”„ë¥¼ ì£¼ì„¸ìš”!' },
        'Pyke': { role: 'SUPPORT', tip: 'ì€ì‹ ìœ¼ë¡œ ê¸°ìŠµí•´ë³´ì„¸ìš”!' },
        'Braum': { role: 'SUPPORT', tip: 'ë°©íŒ¨ë¡œ ì•„êµ°ì„ ì§€ì¼œì£¼ì„¸ìš”!' },
        'Alistar': { role: 'SUPPORT', tip: 'í™©ì†Œì˜ í˜ìœ¼ë¡œ ì ì„ ë“¤ì´ë°›ìœ¼ì„¸ìš”!' },

        // ========== JUNGLE ì±”í”¼ì–¸ë“¤ ==========
        'Lee Sin': { role: 'JUNGLE', tip: 'í‚¥ìœ¼ë¡œ ì ì„ ë‚ ë ¤ë²„ë¦¬ì„¸ìš”!' },
        'Graves': { role: 'JUNGLE', tip: 'ì´ìœ¼ë¡œ ì •ê¸€ì„ ì •ë¦¬í•˜ì„¸ìš”!' },
        'Kha\'Zix': { role: 'JUNGLE', tip: 'ê³ ë¦½ëœ ì ì„ ë…¸ë ¤ë³´ì„¸ìš”!' },
        'Master Yi': { role: 'JUNGLE', tip: 'ì•ŒíŒŒ ìŠ¤íŠ¸ë¼ì´í¬ë¡œ ì ì„ ë² ì–´ë³´ì„¸ìš”!' },
        'Hecarim': { role: 'JUNGLE', tip: 'ë§ì˜ ì†ë„ë¡œ ì ì§„ì„ ëš«ê³  ë“¤ì–´ê°€ì„¸ìš”!' },
        'Elise': { role: 'JUNGLE', tip: 'ê±°ë¯¸ í˜•íƒœë¥¼ í™œìš©í•´ë³´ì„¸ìš”!' },
        'Evelynn': { role: 'JUNGLE', tip: 'ì€ì‹ ìœ¼ë¡œ ê¸°ìŠµ ì•”ì‚´ì„ ë…¸ë ¤ë³´ì„¸ìš”!' },
        'Rengar': { role: 'JUNGLE', tip: 'ìˆ˜í’€ì—ì„œ ì í”„ ê³µê²©í•˜ì„¸ìš”!' },
        'Warwick': { role: 'JUNGLE', tip: 'ëŠ‘ëŒ€ì˜ ë³¸ëŠ¥ìœ¼ë¡œ ì‚¬ëƒ¥í•˜ì„¸ìš”!' },
        'Ammu': { role: 'JUNGLE', tip: 'ë¯¸ë¼ì˜ ìŠ¬í””ìœ¼ë¡œ ì ë“¤ì„ ë¬¶ì–´ë³´ì„¸ìš”!' },

        // ========== TOP ì±”í”¼ì–¸ë“¤ ==========
        'Garen': { role: 'TOP', tip: 'íšŒì „ë² ê¸°ë¡œ ì ì„ ì“¸ì–´ë²„ë¦¬ì„¸ìš”!' },
        'Darius': { role: 'TOP', tip: 'ë„ë¼ë¡œ ì ì„ ì²˜ë‹¨í•˜ì„¸ìš”!' },
        'Fiora': { role: 'TOP', tip: 'ê¸‰ì†Œë¥¼ ë…¸ë ¤ ìš°ì•„í•˜ê²Œ ì‹¸ìš°ì„¸ìš”!' },
        'Jax': { role: 'TOP', tip: 'ë°˜ê²©ìœ¼ë¡œ ì ì˜ ê³µê²©ì„ ë§‰ì•„ë³´ì„¸ìš”!' },
        'Irelia': { role: 'TOP', tip: 'ì¹¼ë‚  ì¶¤ìœ¼ë¡œ ì ì„ ë² ì–´ë³´ì„¸ìš”!' },
        'Malphite': { role: 'TOP', tip: 'ë°”ìœ„ê°™ì€ íƒ±í‚¹ìœ¼ë¡œ ì•„êµ°ì„ ë³´í˜¸í•˜ì„¸ìš”!' },
        'Riven': { role: 'TOP', tip: 'ì½¤ë³´ë¡œ ì ì„ ì••ë„í•˜ì„¸ìš”!' },
        'Aatrox': { role: 'TOP', tip: 'ê²€ìœ¼ë¡œ ì ì„ ë² ë©° ì²´ë ¥ì„ íšŒë³µí•˜ì„¸ìš”!' },
        'Camille': { role: 'TOP', tip: 'ì •ë°€í•œ ë‹¤ë¦¬ë¡œ ì ì„ ì ˆë‹¨í•˜ì„¸ìš”!' },
        'Nasus': { role: 'TOP', tip: 'Që¥¼ ê³„ì† ìŠ¤íƒ ìŒ“ì•„ ìµœê°•ì´ ë˜ì„¸ìš”!' },

        // ========== MID ì±”í”¼ì–¸ë“¤ ==========
        'Yasuo': { role: 'MID', tip: 'ë°”ëŒì˜ ì¥ë²½ìœ¼ë¡œ ì›ê±°ë¦¬ ê³µê²©ì„ ë§‰ìœ¼ì„¸ìš”!' },
        'Zed': { role: 'MID', tip: 'ê·¸ë¦¼ìë¥¼ ì´ìš©í•´ ê¸°ìŠµí•˜ì„¸ìš”!' },
        'Ahri': { role: 'MID', tip: 'ë§¤í˜¹ìœ¼ë¡œ ì ì„ ìœ í˜¹í•˜ì„¸ìš”!' },
        'LeBlanc': { role: 'MID', tip: 'í™˜ìƒìœ¼ë¡œ ì ì„ ì†ì´ì„¸ìš”!' },
        'Syndra': { role: 'MID', tip: 'êµ¬ì²´ë¥¼ ì¡°ì‘í•´ ì ì„ ì œì••í•˜ì„¸ìš”!' },
        'Orianna': { role: 'MID', tip: 'ê³µìœ¼ë¡œ ì•„êµ°ì„ ë³´í˜¸í•˜ê³  ì ì„ ê³µê²©í•˜ì„¸ìš”!' },
        'Lux': { role: 'MID', tip: 'ë¹›ì˜ ë§ˆë²•ìœ¼ë¡œ ì ì„ ê´€í†µí•˜ì„¸ìš”!' },
        'Akali': { role: 'MID', tip: 'ì—°ë§‰ê³¼ ê¸°ë™ì„±ìœ¼ë¡œ ì•”ì‚´í•˜ì„¸ìš”!' },
        'Annie': { role: 'MID', tip: 'ê³° í‹°ë²„ì™€ í•¨ê»˜ ë¶ˆê½ƒìœ¼ë¡œ ì ì„ íƒœìš°ì„¸ìš”!' },
        'Malzahar': { role: 'MID', tip: 'ê³µí—ˆì¶©ìœ¼ë¡œ ë¼ì¸ì„ í‘¸ì‰¬í•˜ì„¸ìš”!' }
    };

    const championNames = Object.keys(championData);
    let isSpinning = false;

    // í˜„ì¬ ë²„ì „ ì •ë³´ (Thymeleafì—ì„œ ê°€ì ¸ì˜¤ê¸°, ì—†ìœ¼ë©´ ê¸°ë³¸ê°’)
    const currentVersion = /*[[${version}]]*/ '14.23.1';

    function spinRoulette() {
        if (isSpinning) return;

        // DOM ìš”ì†Œë“¤ í™•ì¸
        const btn = document.getElementById('roulette-btn');
        const display = document.getElementById('roulette-display');
        const question = document.getElementById('roulette-question');
        const championImage = document.getElementById('champion-image');
        const championName = document.getElementById('champion-name');
        const championRole = document.getElementById('champion-role');
        const championTip = document.getElementById('champion-tip');

        // í•„ìˆ˜ ìš”ì†Œë“¤ì´ ì—†ìœ¼ë©´ í•¨ìˆ˜ ì¢…ë£Œ
        if (!btn || !display || !question || !championImage) {
            console.error('ë£°ë › DOM ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', {
                btn: !!btn,
                display: !!display,
                question: !!question,
                championImage: !!championImage
            });
            return;
        }

        isSpinning = true;

        // ë²„íŠ¼ ë¹„í™œì„±í™”
        btn.disabled = true;
        btn.textContent = 'ëŒë¦¬ëŠ” ì¤‘...';

        // ë£°ë › ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
        display.classList.add('spinning');
        question.style.display = 'block';
        championImage.style.display = 'none';

        // ê²°ê³¼ ìˆ¨ê¸°ê¸°
        championName.style.display = 'none';
        championRole.style.display = 'none';
        championTip.style.display = 'none';

        // 2ì´ˆ í›„ ê²°ê³¼ í‘œì‹œ
        setTimeout(() => {
            // ëœë¤ ì±”í”¼ì–¸ ì„ íƒ
            const randomChampion = championNames[Math.floor(Math.random() * championNames.length)];
            const championInfo = championData[randomChampion];

            // ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì§€
            display.classList.remove('spinning');

            // ê²°ê³¼ í‘œì‹œ
            question.style.display = 'none';
            championImage.style.display = 'block';
            championImage.src = `https://ddragon.leagueoflegends.com/cdn/${currentVersion}/img/champion/${randomChampion}.png`;
            championImage.alt = randomChampion;

            championName.textContent = randomChampion;
            championName.style.display = 'block';

            championRole.textContent = championInfo.role;
            championRole.style.display = 'block';

            championTip.textContent = championInfo.tip;
            championTip.style.display = 'block';

            // ë²„íŠ¼ í™œì„±í™”
            btn.disabled = false;
            btn.textContent = 'ë‹¤ì‹œ ëŒë¦¬ê¸°! ğŸ²';
            isSpinning = false;

            // íš¨ê³¼ìŒ ì¬ìƒ (ì„ íƒì‚¬í•­)
            playRouletteSound();

        }, 2000);
    }

    function playRouletteSound() {
        try {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            // ë£°ë › ì™„ë£Œ ì‚¬ìš´ë“œ
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.1);
            oscillator.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 0.2);

            oscillator.type = 'sine';
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        } catch (e) {
            console.log('Audio playback not supported');
        }
    }

    // ===== ğŸ® ë¯¸ë‹ˆê²Œì„ ê´€ë ¨ ë³€ìˆ˜ë“¤ =====
    let currentReactionGame = null;
    let currentSnakeGame = null;

    // ë¯¸ë‹ˆê²Œì„ í† ê¸€ í•¨ìˆ˜
    function toggleMinigame(gameId) {
        const content = document.getElementById(gameId + '-content');
        const arrow = document.getElementById(gameId + '-arrow');

        if (content.classList.contains('expanded')) {
            content.classList.remove('expanded');
            arrow.classList.remove('expanded');
            arrow.textContent = 'â–¼';

            // ê²Œì„ ì •ë¦¬
            if (gameId.includes('reaction-test') && currentReactionGame) {
                currentReactionGame.destroy();
                currentReactionGame = null;
            }
            if (gameId.includes('snake-game') && currentSnakeGame) {
                currentSnakeGame.destroy();
                currentSnakeGame = null;
            }
        } else {
            // ë‹¤ë¥¸ ëª¨ë“  ë¯¸ë‹ˆê²Œì„ ë‹«ê¸°
            document.querySelectorAll('.minigame-content').forEach(item => {
                item.classList.remove('expanded');
            });
            document.querySelectorAll('.minigame-arrow').forEach(arrow => {
                arrow.classList.remove('expanded');
                arrow.textContent = 'â–¼';
            });

            // ê¸°ì¡´ ê²Œì„ë“¤ ì •ë¦¬
            if (currentReactionGame) {
                currentReactionGame.destroy();
                currentReactionGame = null;
            }
            if (currentSnakeGame) {
                currentSnakeGame.destroy();
                currentSnakeGame = null;
            }

            // ì„ íƒëœ ë¯¸ë‹ˆê²Œì„ ì—´ê¸°
            content.classList.add('expanded');
            arrow.classList.add('expanded');
            arrow.textContent = 'â–²';
        }
    }

    // ë°˜ì‘ì†ë„ í…ŒìŠ¤íŠ¸ ì‹œì‘
    function startReactionTest(areaId) {
        const gameArea = document.getElementById(areaId);
        if (!gameArea) return;

        // ê¸°ì¡´ ê²Œì„ì´ ìˆë‹¤ë©´ ì •ë¦¬
        if (currentReactionGame) {
            currentReactionGame.destroy();
        }

        // ReactionTestGame í´ë˜ìŠ¤ ì§ì ‘ êµ¬í˜„ (ê°„ë‹¨ ë²„ì „)
        currentReactionGame = createReactionTestGame(gameArea);
    }

    // ë±€ ê²Œì„ ì‹œì‘
    function startSnakeGame(areaId) {
        const gameArea = document.getElementById(areaId);
        if (!gameArea) return;

        // ê¸°ì¡´ ê²Œì„ì´ ìˆë‹¤ë©´ ì •ë¦¬
        if (currentSnakeGame) {
            currentSnakeGame.destroy();
        }

        // SnakeGame í´ë˜ìŠ¤ ì§ì ‘ êµ¬í˜„ (ê°„ë‹¨ ë²„ì „)
        currentSnakeGame = createSnakeGame(gameArea);
    }

    // ë°˜ì‘ì†ë„ í…ŒìŠ¤íŠ¸ ê²Œì„ ìƒì„±
    function createReactionTestGame(gameArea) {
        let isRunning = false;
        let startTime = 0;
        let waitTimeout = null;

        gameArea.innerHTML = `
            <div style="background: rgba(0,0,0,0.8); padding: 30px; border-radius: 15px; text-align: center;">
                <div id="reaction-display" style="width: 400px; height: 300px; background: #667eea; margin: 0 auto 25px; border-radius: 15px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.8rem; cursor: pointer; transition: all 0.3s ease; font-weight: bold; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">
                    ì¤€ë¹„í•˜ì„¸ìš”... ë¹¨ê°„ìƒ‰ì´ ì´ˆë¡ìƒ‰ìœ¼ë¡œ ë°”ë€Œë©´ í´ë¦­!
                </div>
                <div id="reaction-result" style="color: white; min-height: 100px; margin-bottom: 25px; font-size: 1.2rem; line-height: 1.5;"></div>
                <button id="reaction-start-btn" onclick="startReactionGame()" style="background: linear-gradient(45deg, #7461ee, #ff6b9d); color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; font-size: 1.1rem; font-weight: 600;">
                    ğŸš€ ì‹œì‘
                </button>
            </div>
        `;

        window.startReactionGame = function() {
            if (isRunning) return;

            isRunning = true;
            const display = document.getElementById('reaction-display');
            const result = document.getElementById('reaction-result');
            const btn = document.getElementById('reaction-start-btn');

            btn.disabled = true;
            btn.textContent = 'ëŒ€ê¸°ì¤‘...';
            result.textContent = '';

            // ì¤€ë¹„ ë‹¨ê³„ (ë¹¨ê°„ìƒ‰)
            display.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)';
            display.textContent = 'ì ì‹œ ê¸°ë‹¤ë¦¬ì„¸ìš”...';

            // ëœë¤ ì‹œê°„ í›„ ì‹œì‘ (2-6ì´ˆ)
            const waitTime = Math.random() * 4000 + 2000;

            waitTimeout = setTimeout(() => {
                if (!isRunning) return;

                display.style.background = 'linear-gradient(135deg, #00d2d3 0%, #54a0ff 100%)';
                display.textContent = 'ì§€ê¸ˆ í´ë¦­í•˜ì„¸ìš”!';
                startTime = performance.now();
            }, waitTime);

            // í´ë¦­ ì´ë²¤íŠ¸
            display.onclick = function() {
                if (!isRunning) return;

                const currentTime = performance.now();

                if (startTime === 0) {
                    // ë„ˆë¬´ ë¹¨ë¦¬ í´ë¦­
                    endReactionGame('early', 0);
                } else {
                    // ì •ìƒ ë°˜ì‘
                    const reactionTime = currentTime - startTime;
                    endReactionGame('success', reactionTime);
                }
            };
        };

        function endReactionGame(type, reactionTime) {
            isRunning = false;
            clearTimeout(waitTimeout);
            startTime = 0;

            const display = document.getElementById('reaction-display');
            const result = document.getElementById('reaction-result');
            const btn = document.getElementById('reaction-start-btn');

            btn.disabled = false;
            btn.textContent = 'ë‹¤ì‹œ ì‹œì‘';

            if (type === 'early') {
                display.style.background = '#ff6b6b';
                display.textContent = 'ë„ˆë¬´ ë¹¨ë¼ìš”! ğŸ˜…';
                result.innerHTML = 'ì•„ì§ ì‹ í˜¸ê°€ ë‚˜ì˜¤ì§€ ì•Šì•˜ì–´ìš”!<br>ì´ˆë¡ìƒ‰ìœ¼ë¡œ ë°”ë€” ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ë³´ì„¸ìš”.';
                return;
            }

            // ì„±ê³µí•œ ê²½ìš°
            const analysis = analyzeReactionTime(reactionTime);
            display.style.background = 'linear-gradient(135deg, #feca57 0%, #ff9ff3 100%)';
            display.textContent = `${Math.round(reactionTime)}ms`;
            result.innerHTML = `
                <div style="background: ${analysis.color}; color: ${analysis.textColor}; padding: 8px 16px; border-radius: 20px; font-weight: bold; margin-bottom: 10px; display: inline-block;">
                    ${analysis.grade} ë“±ê¸‰
                </div><br>
                ${analysis.message}<br>
                <small style="color: #ccc;">${analysis.description}</small>
            `;
        }

        function analyzeReactionTime(time) {
            if (time < 150) {
                return {
                    grade: 'S+',
                    message: 'ì´ˆì¸ê°„ì  ë°˜ì‘ì†ë„! ğŸ¤–',
                    description: 'í”„ë¡œê²Œì´ë¨¸ë„ ë¶€ëŸ¬ì›Œí•  ë°˜ì‘ì†ë„ì…ë‹ˆë‹¤!',
                    color: 'linear-gradient(45deg, #ffd700, #ffed4e)',
                    textColor: '#333'
                };
            } else if (time < 200) {
                return {
                    grade: 'S',
                    message: 'í”„ë¡œê²Œì´ë¨¸ ìˆ˜ì¤€! ğŸ†',
                    description: 'ì „ë¬¸ ê²Œì´ë¨¸ ìˆ˜ì¤€ì˜ ë†€ë¼ìš´ ë°˜ì‘ì†ë„ë„¤ìš”!',
                    color: 'linear-gradient(45deg, #c0c0c0, #e8e8e8)',
                    textColor: '#333'
                };
            } else if (time < 250) {
                return {
                    grade: 'A',
                    message: 'ë§¤ìš° ë¹ ë¦„! âš¡',
                    description: 'ìƒìœ„ 5%ì— í•´ë‹¹í•˜ëŠ” ë¹ ë¥¸ ë°˜ì‘ì†ë„ì…ë‹ˆë‹¤!',
                    color: 'linear-gradient(45deg, #cd7f32, #daa520)',
                    textColor: 'white'
                };
            } else if (time < 300) {
                return {
                    grade: 'B',
                    message: 'ì¢‹ì€ ë°˜ì‘ì†ë„! ğŸ‘',
                    description: 'í‰ê· ë³´ë‹¤ ë¹ ë¥¸ ì¢‹ì€ ë°˜ì‘ì†ë„ì˜ˆìš”!',
                    color: 'linear-gradient(45deg, #4ecdc4, #44a08d)',
                    textColor: 'white'
                };
            } else {
                return {
                    grade: 'C',
                    message: 'ì—°ìŠµì´ í•„ìš”í•´ìš”! ğŸ’ª',
                    description: 'ì¡°ê¸ˆ ë” ì§‘ì¤‘í•´ì„œ ì—°ìŠµí•´ë³´ì„¸ìš”!',
                    color: 'linear-gradient(45deg, #95a5a6, #7f8c8d)',
                    textColor: 'white'
                };
            }
        }

        return {
            destroy: function() {
                isRunning = false;
                clearTimeout(waitTimeout);
                if (window.startReactionGame) {
                    delete window.startReactionGame;
                }
            }
        };
    }

    // ë±€ ê²Œì„ ìƒì„± (ê°„ë‹¨ ë²„ì „)
    function createSnakeGame(gameArea) {
        let canvas, ctx;
        let snake = [{x: 10, y: 10}];
        let direction = {x: 1, y: 0};
        let food = {x: 15, y: 15};
        let score = 0;
        let gameLoop = null;
        let gameRunning = false;

        gameArea.innerHTML = `
            <div style="background: rgba(0,0,0,0.8); padding: 25px; border-radius: 15px; text-align: center;">
                <div style="color: white; margin-bottom: 20px; font-size: 1.1rem;">
                    ì ìˆ˜: <span id="snake-score" style="color: #4ecdc4; font-weight: bold;">0</span>
                </div>
                <canvas id="snake-canvas" width="400" height="400" style="background: #1a1a2e; border: 3px solid #7461ee; border-radius: 12px; display: block; margin: 0 auto 20px;"></canvas>
                <div style="color: #ccc; margin-bottom: 20px;">ë°©í–¥í‚¤ë¡œ ì¡°ì‘í•˜ì„¸ìš”!</div>
                <button id="snake-start-btn" onclick="startSnakeGameLoop()" style="background: linear-gradient(45deg, #7461ee, #ff6b9d); color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; font-size: 1rem; margin-right: 10px;">ğŸš€ ì‹œì‘</button>
                <button id="snake-reset-btn" onclick="resetSnakeGame()" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); padding: 15px 30px; border-radius: 25px; cursor: pointer; font-size: 1rem; display: none;">ğŸ”„ ë‹¤ì‹œí•˜ê¸°</button>
            </div>
        `;

        canvas = document.getElementById('snake-canvas');
        ctx = canvas.getContext('2d');

        const keyHandler = (e) => {
            if (!gameRunning) return;
            switch(e.key) {
                case 'ArrowUp': if (direction.y === 0) direction = {x: 0, y: -1}; break;
                case 'ArrowDown': if (direction.y === 0) direction = {x: 0, y: 1}; break;
                case 'ArrowLeft': if (direction.x === 0) direction = {x: -1, y: 0}; break;
                case 'ArrowRight': if (direction.x === 0) direction = {x: 1, y: 0}; break;
            }
            e.preventDefault();
        };
        document.addEventListener('keydown', keyHandler);

        window.startSnakeGameLoop = function() {
            if (gameRunning) return;
            gameRunning = true;
            document.getElementById('snake-start-btn').style.display = 'none';
            gameLoop = setInterval(updateSnakeGame, 150);
        };

        window.resetSnakeGame = function() {
            gameRunning = false;
            clearInterval(gameLoop);
            snake = [{x: 10, y: 10}];
            direction = {x: 1, y: 0};
            food = {x: 15, y: 15};
            score = 0;
            document.getElementById('snake-score').textContent = '0';
            document.getElementById('snake-start-btn').style.display = 'inline-block';
            document.getElementById('snake-reset-btn').style.display = 'none';
            drawSnakeGame();
        };

        function updateSnakeGame() {
            const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};
            if (head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20 ||
                snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                gameRunning = false;
                clearInterval(gameLoop);
                alert(`ê²Œì„ ì˜¤ë²„! ì ìˆ˜: ${score}`);
                document.getElementById('snake-reset-btn').style.display = 'inline-block';
                return;
            }
            snake.unshift(head);
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                document.getElementById('snake-score').textContent = score;
                generateFood();
            } else {
                snake.pop();
            }
            drawSnakeGame();
        }

        function drawSnakeGame() {
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, 400, 400);

            // ë±€ ê·¸ë¦¬ê¸°
            snake.forEach((segment, index) => {
                ctx.fillStyle = index === 0 ? '#4ecdc4' : '#45b7d1';
                ctx.fillRect(segment.x * 20, segment.y * 20, 18, 18);
            });

            // ìŒì‹ ê·¸ë¦¬ê¸°
            ctx.fillStyle = '#ff6b6b';
            ctx.fillRect(food.x * 20, food.y * 20, 18, 18);
        }

        function generateFood() {
            do {
                food = {x: Math.floor(Math.random() * 20), y: Math.floor(Math.random() * 20)};
            } while (snake.some(segment => segment.x === food.x && segment.y === food.y));
        }

        drawSnakeGame();

        return {
            destroy: function() {
                gameRunning = false;
                clearInterval(gameLoop);
                document.removeEventListener('keydown', keyHandler);
                if (window.startSnakeGameLoop) delete window.startSnakeGameLoop;
                if (window.resetSnakeGame) delete window.resetSnakeGame;
            }
        };
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
    document.addEventListener('DOMContentLoaded', function() {
        // ì¹´ë“œ ì• ë‹ˆë©”ì´ì…˜
        const cards = document.querySelectorAll('.comment-card, .user-info-card, .stat-card, .champion-roulette-card, .content-recommendation');
        cards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';

            setTimeout(() => {
                card.style.transition = 'all 0.6s ease';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 150);
        });
    });

    // í˜ì´ì§€ ì–¸ë¡œë“œ ì‹œ ê²Œì„ ì •ë¦¬
    window.addEventListener('beforeunload', function() {
        if (currentReactionGame) {
            currentReactionGame.destroy();
        }
        if (currentSnakeGame) {
            currentSnakeGame.destroy();
        }
    });

    // ì „ì—­ í•¨ìˆ˜ë“¤ì„ windowì— ë°”ì¸ë”©
    window.spinRoulette = spinRoulette;
    window.toggleMinigame = toggleMinigame;
    window.startReactionTest = startReactionTest;
    window.startSnakeGame = startSnakeGame;
</script>
</body>
</html>