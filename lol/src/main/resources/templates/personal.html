<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Í∞úÏù∏Ìôî Î∂ÑÏÑù - Luminary</title>
    <link rel="icon" type="image/png" href="/images/wepSiteLogo.png">

    <!-- üåå Cards Galaxy Ï±îÌîºÏñ∏ Ï∂îÏ≤ú ÏãúÏä§ÌÖú -->
    <script src="/js/cardsGalaxyRecommendation.js"></script>

    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
            background-color: #0a0a0a;
        }

        .page-container {
            width: 100%;
            min-height: 100vh;
            background-image: url('/images/background.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
        }

        .top-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 200px;
            background: linear-gradient(to bottom,
                rgba(0, 0, 0, 1) 0%,
                rgba(0, 0, 0, 0.95) 5%,
                rgba(0, 0, 0, 0.9) 10%,
                rgba(0, 0, 0, 0.85) 15%,
                rgba(0, 0, 0, 0.8) 20%,
                rgba(0, 0, 0, 0.75) 25%,
                rgba(0, 0, 0, 0.7) 30%,
                rgba(0, 0, 0, 0.65) 35%,
                rgba(0, 0, 0, 0.6) 40%,
                rgba(0, 0, 0, 0.55) 45%,
                rgba(0, 0, 0, 0.5) 50%,
                rgba(0, 0, 0, 0.45) 55%,
                rgba(0, 0, 0, 0.4) 60%,
                rgba(0, 0, 0, 0.35) 65%,
                rgba(0, 0, 0, 0.3) 70%,
                rgba(0, 0, 0, 0.25) 75%,
                rgba(0, 0, 0, 0.2) 80%,
                rgba(0, 0, 0, 0.15) 85%,
                rgba(0, 0, 0, 0.1) 90%,
                rgba(0, 0, 0, 0.05) 95%,
                rgba(0, 0, 0, 0) 100%
            );
            z-index: 5;
        }

        .header-logo {
            position: fixed;
            top: 20px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .logo-icon {
            height: 30px;
            margin-right: 10px;
        }

        .small-logo {
            height: 25px;
        }

        .main-content {
            padding-top: 120px;
            padding-bottom: 50px;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 3;
        }

        /* üî• ÌÜµÏùºÎêú Ïπ¥Îìú Í∏∞Î≥∏ Ïä§ÌÉÄÏùº */
        .unified-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .unified-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .unified-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .unified-card:hover::before {
            opacity: 1;
        }

        /* üéØ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ÏôÄ Î£∞Î†õÏù¥ Ìï®Íªò ÏûàÎäî ÏÉÅÎã® ÏÑπÏÖò */
        .user-and-roulette-section {
            display: flex;
            gap: 20px;
            margin: 20px;
            align-items: stretch;
        }

        .user-info-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            flex: 1;
            min-width: 0;
        }

        .user-info-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .user-info-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .user-info-card:hover::before {
            opacity: 1;
        }

        .profile-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 4px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 15px;
            flex-shrink: 0;
        }

        .user-info-text h1 {
            color: #fff;
            font-size: 2rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .user-subtitle {
            color: #aaa;
            font-size: 1rem;
            margin-bottom: 10px;
        }

        /* üéØ Ï±îÌîºÏñ∏ Î£∞Î†õ Ïπ¥Îìú */
        .champion-roulette-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            flex: 0 0 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .champion-roulette-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ffc107, #ff9800, #f44336);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .champion-roulette-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .champion-roulette-card:hover::before {
            opacity: 1;
        }

        .roulette-title {
            color: #ffc107;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .roulette-display {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .roulette-display.spinning {
            animation: spin 2s linear, colorShift 2s ease-in-out;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(1080deg); }
        }

        @keyframes colorShift {
            0% { background: linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #48dbfb 100%); }
            50% { background: linear-gradient(135deg, #feca57 0%, #48dbfb 50%, #ff6b6b 100%); }
            100% { background: linear-gradient(135deg, #48dbfb 0%, #ff6b6b 50%, #feca57 100%); }
        }

        .champion-image {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.8);
        }

        .roulette-question {
            font-size: 3rem;
            color: white;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        .roulette-result {
            text-align: center;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .champion-name {
            color: #fff;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .champion-role {
            color: #ffc107;
            font-size: 0.9rem;
            background: rgba(255, 193, 7, 0.2);
            padding: 4px 12px;
            border-radius: 12px;
            margin-bottom: 10px;
        }

        .champion-tip {
            color: #ccc;
            font-size: 0.8rem;
            line-height: 1.4;
            text-align: center;
        }

        .roulette-btn {
            background: linear-gradient(45deg, #ffc107, #ff9800);
            border: none;
            border-radius: 25px;
            color: white;
            padding: 12px 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .roulette-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 193, 7, 0.4);
            background: linear-gradient(45deg, #ffcd38, #ffa726);
        }

        .roulette-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* üåå Cards Galaxy Ïª®ÌÖåÏù¥ÎÑà - ÌñâÏÑ± Í∂§ÎèÑ Ìö®Í≥º Ìè¨Ìï® */
        .galaxy-container {
            position: relative;
            width: 100%;
            min-height: 800px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            margin: 30px 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
        }

        .galaxy-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .galaxy-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .galaxy-container:hover::before {
            opacity: 1;
        }

        /* üåü Î≥ÑÎì§ Ïï†ÎãàÎ©îÏù¥ÏÖò */
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite alternate;
        }

        @keyframes twinkle {
            from { opacity: 0.3; transform: scale(1); }
            to { opacity: 1; transform: scale(1.2); }
        }

        /* ü™ê ÌîåÎ†àÏù¥Ïñ¥ ÌóàÎ∏å (Ï§ëÏïô) - ÌöåÏ†Ñ Ïï†ÎãàÎ©îÏù¥ÏÖò */
        .player-hub {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            background: conic-gradient(from 0deg, rgba(102, 126, 234, 0.8), rgba(255, 107, 157, 0.8), rgba(78, 205, 196, 0.8), rgba(102, 126, 234, 0.8));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 5;
            animation: hubRotate 60s linear infinite;
        }

        @keyframes hubRotate {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .player-info {
            width: 180px;
            height: 180px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(20px);
            text-align: center;
            animation: hubInfoCounter 60s linear infinite;
        }

        @keyframes hubInfoCounter {
            from { transform: rotate(0deg); }
            to { transform: rotate(-360deg); }
        }

        /* üé¥ Ï±îÌîºÏñ∏ Ïπ¥Îìú Ïª®ÌÖåÏù¥ÎÑà */
        .champion-cards-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 3;
        }

        /* üåç ÌñâÏÑ± Í∂§ÎèÑ Ïï†ÎãàÎ©îÏù¥ÏÖò - Ï±îÌîºÏñ∏ Ïπ¥ÎìúÎì§ */
        .champion-card {
            position: absolute;
            width: 160px;
            height: 220px;
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            pointer-events: auto;
            opacity: 0;
            left: 50%;
            top: 50%;
            transform-origin: center center;
        }

        /* Í∂§ÎèÑÎ≥Ñ ÌöåÏ†Ñ Ïï†ÎãàÎ©îÏù¥ÏÖò */
        .champion-card.orbit-1 {
            animation: orbit1 45s linear infinite;
        }

        .champion-card.orbit-2 {
            animation: orbit2 60s linear infinite;
        }

        .champion-card.orbit-3 {
            animation: orbit3 75s linear infinite;
        }

        /* Ï≤´ Î≤àÏß∏ Í∂§ÎèÑ (Í∞ÄÏû• ÏïàÏ™Ω) - 250px Î∞òÏßÄÎ¶Ñ */
        @keyframes orbit1 {
            from {
                transform: translate(-50%, -50%) rotate(0deg) translateX(250px) rotate(0deg);
                opacity: 1;
            }
            to {
                transform: translate(-50%, -50%) rotate(360deg) translateX(250px) rotate(-360deg);
                opacity: 1;
            }
        }

        /* Îëê Î≤àÏß∏ Í∂§ÎèÑ (Ï§ëÍ∞Ñ) - 350px Î∞òÏßÄÎ¶Ñ */
        @keyframes orbit2 {
            from {
                transform: translate(-50%, -50%) rotate(0deg) translateX(350px) rotate(0deg);
                opacity: 1;
            }
            to {
                transform: translate(-50%, -50%) rotate(360deg) translateX(350px) rotate(-360deg);
                opacity: 1;
            }
        }

        /* ÏÑ∏ Î≤àÏß∏ Í∂§ÎèÑ (Í∞ÄÏû• Î∞îÍπ•Ï™Ω) - 450px Î∞òÏßÄÎ¶Ñ */
        @keyframes orbit3 {
            from {
                transform: translate(-50%, -50%) rotate(0deg) translateX(450px) rotate(0deg);
                opacity: 1;
            }
            to {
                transform: translate(-50%, -50%) rotate(360deg) translateX(450px) rotate(-360deg);
                opacity: 1;
            }
        }

        .champion-card.visible {
            opacity: 1;
        }

        .champion-card:hover {
            transform: translate(-50%, -50%) scale(1.05);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
            border-color: rgba(102, 126, 234, 0.8);
            z-index: 10;
            animation-play-state: paused;
        }

        .champion-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            margin: 0 auto 10px;
            border: 3px solid rgba(255,255,255,0.3);
            overflow: hidden;
            position: relative;
        }

        .champion-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .champion-name {
            color: white;
            font-size: 1rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 8px;
        }

        .champion-role {
            color: #4ecdc4;
            font-size: 0.8rem;
            text-align: center;
            background: rgba(78, 205, 196, 0.2);
            padding: 4px 10px;
            border-radius: 12px;
            margin-bottom: 10px;
            display: inline-block;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .confidence-score {
            color: #ffc107;
            font-size: 0.9rem;
            text-align: center;
            font-weight: bold;
            background: rgba(255, 193, 7, 0.2);
            padding: 4px 8px;
            border-radius: 10px;
            margin-bottom: 8px;
        }

        .champion-tags {
            display: flex;
            gap: 4px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 8px;
        }

        .champion-tag {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.6rem;
            padding: 2px 6px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .champion-tag.meta { background: rgba(255, 107, 157, 0.3); color: #ff6b9d; }
        .champion-tag.personal { background: rgba(78, 205, 196, 0.3); color: #4ecdc4; }
        .champion-tag.style { background: rgba(255, 193, 7, 0.3); color: #ffc107; }

        /* Í∂§ÎèÑ ÎßÅ */
        .orbit-ring {
            position: absolute;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }

        .orbit-ring.ring-1 {
            width: 500px;
            height: 500px;
            border-color: rgba(102, 126, 234, 0.3);
            animation: ringRotate1 40s linear infinite;
        }

        .orbit-ring.ring-2 {
            width: 700px;
            height: 700px;
            border-color: rgba(255, 107, 157, 0.2);
            animation: ringRotate2 60s linear infinite reverse;
        }

        .orbit-ring.ring-3 {
            width: 900px;
            height: 900px;
            border-color: rgba(78, 205, 196, 0.15);
            animation: ringRotate3 80s linear infinite;
        }

        @keyframes ringRotate1 {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @keyframes ringRotate2 {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @keyframes ringRotate3 {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Î°úÎî© ÌîåÎ†àÏù¥Ïä§ÌôÄÎçî */
        .loading-placeholder {
            animation: fadeInOut 2s ease-in-out infinite;
            text-align: center;
            padding: 50px;
            color: white;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* Í∏∞Ï°¥ Ïä§ÌÉÄÏùºÎì§ - ÌÜµÏùºÎêú Ïπ¥Îìú Ìö®Í≥º Ï†ÅÏö© */
        .comment-section {
            margin: 30px 20px;
        }

        .comment-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 25px;
            margin: 15px 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .comment-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .comment-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .comment-card:hover::before {
            opacity: 1;
        }

        .comment-title {
            color: #4ecdc4;
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .comment-emoji {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .comment-text {
            color: #fff;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .comment-subtext {
            color: #888;
            font-size: 0.9rem;
            font-style: italic;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin: 20px;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-number {
            color: #4ecdc4;
            font-size: 1.8rem;
            font-weight: bold;
            display: block;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #aaa;
            font-size: 0.85rem;
            line-height: 1.2;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 20px;
        }

        .action-btn {
            background: rgba(74, 144, 226, 0.8);
            border: none;
            border-radius: 25px;
            color: white;
            padding: 12px 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            backdrop-filter: blur(10px);
        }

        .action-btn:hover {
            background: rgba(74, 144, 226, 1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.4);
        }

        .action-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .action-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* üéØ ÏΩòÌÖêÏ∏† Ï∂îÏ≤ú ÏÑπÏÖò Ïä§ÌÉÄÏùº */
        .content-recommendation {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 20px;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .content-recommendation::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #7461ee, #ff6b9d, #4ecdc4);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .content-recommendation:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .content-recommendation:hover::before {
            opacity: 1;
        }

        .content-recommendation-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .content-recommendation-title {
            color: #7461ee;
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .content-recommendation-message {
            color: #fff;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        /* ‚ú® AI ÏòÅÏÉÅ ÏΩòÌÖêÏ∏† Í∑∏Î¶¨Îìú (ÎèôÏ†Å Î°úÎî©) */
        .video-content-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .video-content-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .video-content-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(116, 97, 238, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(116, 97, 238, 0.2);
        }

        .video-thumbnail {
            width: 100%;
            height: 160px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-play-icon {
            position: absolute;
            font-size: 3rem;
            color: white;
            opacity: 0.8;
            z-index: 2;
            text-shadow: 0 2px 10px rgba(0,0,0,0.8);
            transition: all 0.3s ease;
        }

        .video-content-item:hover .video-play-icon {
            opacity: 1;
            transform: scale(1.1);
        }

        .video-info {
            padding: 15px;
        }

        .video-title {
            color: #fff;
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 8px;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .video-description {
            color: #ccc;
            font-size: 0.85rem;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .video-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            font-size: 0.75rem;
        }

        .video-channel {
            color: #7461ee;
            font-weight: 500;
        }

        .video-relevance {
            color: #ffc107;
            background: rgba(255, 193, 7, 0.2);
            padding: 2px 8px;
            border-radius: 10px;
        }

        /* Î°úÎî© ÏÉÅÌÉú */
        .video-loading {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            color: #ccc;
            font-size: 1.1rem;
        }

        .video-loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.1);
            border-top: 3px solid #7461ee;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 15px;
        }

        /* ÏóêÎü¨ ÏÉÅÌÉú */
        .video-error {
            text-align: center;
            padding: 30px;
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .retry-btn {
            background: linear-gradient(45deg, #7461ee, #ff6b9d);
            border: none;
            border-radius: 20px;
            color: white;
            padding: 8px 16px;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .retry-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(116, 97, 238, 0.4);
        }

        /* ÎØ∏ÎãàÍ≤åÏûÑ ÏÑπÏÖò */
        .minigames-section {
            margin-top: 30px;
        }

        .minigames-title {
            color: #4ecdc4;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .minigame-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .minigame-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .minigame-item:hover::before {
            opacity: 1;
        }

        .minigame-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            cursor: pointer;
        }

        .minigame-header:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .minigame-title-text {
            color: #fff;
            font-size: 1rem;
            font-weight: 500;
            display: flex;
            align-items: center;
        }

        .minigame-icon {
            font-size: 1.2rem;
            margin-right: 10px;
        }

        .minigame-arrow {
            color: #7461ee;
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }

        .minigame-arrow.expanded {
            transform: rotate(180deg);
        }

        .minigame-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .minigame-content.expanded {
            max-height: 800px;
            padding: 25px;
        }

        .minigame-game-area {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .minigame-description {
            color: #ccc;
            margin-bottom: 15px;
        }

        .minigame-start-btn {
            background: linear-gradient(45deg, #7461ee, #ff6b9d);
            border: none;
            border-radius: 25px;
            color: white;
            padding: 12px 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .minigame-start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(116, 97, 238, 0.4);
        }

        /* Î∞òÏùëÌòï */
        @media (max-width: 768px) {
            .user-and-roulette-section {
                flex-direction: column;
                margin: 10px;
            }

            .champion-roulette-card {
                flex: none;
            }

            .user-info-card {
                flex-direction: column;
                text-align: center;
            }

            .profile-icon {
                margin-right: 0;
                margin-bottom: 15px;
            }

            .user-info-text h1 {
                font-size: 1.5rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                margin: 10px;
            }

            .video-content-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .comment-card {
                margin: 10px;
                padding: 20px;
            }

            .content-recommendation {
                margin: 20px 10px;
                padding: 20px;
            }

            .galaxy-container {
                margin: 20px 10px;
                min-height: 600px;
            }

            /* Î™®Î∞îÏùºÏóêÏÑú Í∂§ÎèÑ ÌÅ¨Í∏∞ Ï°∞Ï†ï */
            @keyframes orbit1 {
                from {
                    transform: translate(-50%, -50%) rotate(0deg) translateX(150px) rotate(0deg);
                    opacity: 1;
                }
                to {
                    transform: translate(-50%, -50%) rotate(360deg) translateX(150px) rotate(-360deg);
                    opacity: 1;
                }
            }

            @keyframes orbit2 {
                from {
                    transform: translate(-50%, -50%) rotate(0deg) translateX(220px) rotate(0deg);
                    opacity: 1;
                }
                to {
                    transform: translate(-50%, -50%) rotate(360deg) translateX(220px) rotate(-360deg);
                    opacity: 1;
                }
            }

            @keyframes orbit3 {
                from {
                    transform: translate(-50%, -50%) rotate(0deg) translateX(290px) rotate(0deg);
                    opacity: 1;
                }
                to {
                    transform: translate(-50%, -50%) rotate(360deg) translateX(290px) rotate(-360deg);
                    opacity: 1;
                }
            }

            .orbit-ring.ring-1 {
                width: 300px;
                height: 300px;
            }

            .orbit-ring.ring-2 {
                width: 440px;
                height: 440px;
            }

            .orbit-ring.ring-3 {
                width: 580px;
                height: 580px;
            }

            .champion-card {
                width: 120px;
                height: 180px;
                padding: 10px;
            }

            .champion-avatar {
                width: 50px;
                height: 50px;
            }

            .champion-name {
                font-size: 0.8rem;
            }

            .champion-role {
                font-size: 0.7rem;
                padding: 2px 6px;
            }

            .confidence-score {
                font-size: 0.7rem;
                padding: 2px 6px;
            }

            .player-hub {
                width: 150px;
                height: 150px;
            }

            .player-info {
                width: 130px;
                height: 130px;
            }
        }
    </style>
</head>
<body>
<div class="page-container">
    <div class="top-gradient"></div>

    <div class="header-logo">
        <img src="/images/siteLogo.png" alt="Site Logo" class="logo-icon">
        <img src="/images/smallLogo.png" alt="Luminary" class="small-logo">
    </div>

    <div class="main-content">
        <!-- üéØ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ÏôÄ Î£∞Î†õ ÏÑπÏÖò -->
        <div class="user-and-roulette-section">
            <!-- ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ïπ¥Îìú (ÏôºÏ™Ω) -->
            <div class="user-info-card">
                <img th:src="'https://ddragon.leagueoflegends.com/cdn/' + ${version} + '/img/profileicon/'+${userdata.profileIconId}+'.png'"
                     class="profile-icon" alt="ÌîÑÎ°úÌïÑ ÏïÑÏù¥ÏΩò">

                <div class="user-info-text">
                    <h1 th:text="${gameName + '#' + tagLine}">Hide on bush#KR1</h1>
                    <div class="user-subtitle">ÎãπÏã†Ïùò Î°§ Ïù∏ÏÉùÏùÑ Î∂ÑÏÑùÌï¥ÎìúÎ¶¥Í≤åÏöî! ‚ú®</div>
                    <div class="user-subtitle" th:if="${userdata != null}" th:text="'Î†àÎ≤® ' + ${userdata.summonerLevel}">Î†àÎ≤® 837</div>
                </div>
            </div>

            <!-- üéØ Ï±îÌîºÏñ∏ Î£∞Î†õ Ïπ¥Îìú (Ïò§Î•∏Ï™Ω) -->
            <div class="champion-roulette-card">
                <div class="roulette-title">Ïò§ÎäòÏùò Ï±îÌîºÏñ∏ÏùÄ Î≠òÍπåÏöî?!</div>

                <div class="roulette-display" id="roulette-display">
                    <div class="roulette-question" id="roulette-question">?</div>
                    <img class="champion-image" id="champion-image" style="display: none;" alt="Ï±îÌîºÏñ∏">
                </div>

                <div class="roulette-result" id="roulette-result">
                    <div class="champion-name" id="champion-name" style="display: none;"></div>
                    <div class="champion-role" id="champion-role" style="display: none;"></div>
                    <div class="champion-tip" id="champion-tip" style="display: none;"></div>
                </div>

                <button class="roulette-btn" id="roulette-btn" onclick="spinRoulette()">
                    Î£∞Î†õ ÎèåÎ¶¨Í∏∞! üé≤
                </button>
            </div>
        </div>

        <!-- üåå Cards Galaxy - AI Í∏∞Î∞ò Ï±îÌîºÏñ∏ Ï∂îÏ≤ú ÏãúÏä§ÌÖú -->
        <div class="galaxy-container" id="galaxyContainer">
            <!-- JavaScriptÎ°ú ÎèôÏ†Å ÏÉùÏÑ±Îê® -->
            <div class="loading-placeholder">
                <div style="font-size: 2rem; margin-bottom: 20px;">üåå</div>
                <div style="font-size: 1.2rem; margin-bottom: 10px;">Cards Galaxy Î°úÎî© Ï§ë...</div>
                <div style="color: rgba(255,255,255,0.7);">AI Í∏∞Î∞ò Ï±îÌîºÏñ∏ Ï∂îÏ≤ú ÏãúÏä§ÌÖúÏùÑ Ï§ÄÎπÑÌïòÍ≥† ÏûàÏäµÎãàÎã§.</div>
            </div>
        </div>

        <!-- Ïò§ÎäòÏùò Î©îÏù∏ Î©òÌä∏ -->
        <div class="comment-section">
            <div class="comment-card">
                <div class="comment-title">
                    <span class="comment-emoji">üå¶Ô∏è</span>
                    Ïò§ÎäòÏùò ÎÇ†Ïî® & Í≤åÏûÑ Ïö¥ÏÑ∏
                </div>
                <div class="comment-text" th:utext="${weatherComment + '&lt;br&gt;' + playTimeComment}">
                    "ÎπÑ Ïò§Îäî ÎÇ†Ïóî ÏßëÏóêÏÑú Î°§Ïù¥ ÏµúÍ≥†Ï£†~ ‚òî (ÌòÑÏû¨ 0¬∞C)<br>
                    Ï¥ù Ï∂îÏ†ï ÌîåÎ†àÏù¥ ÏãúÍ∞Ñ 5,707ÏãúÍ∞Ñ... ÏßÑÏßú ÌîÑÎ°úÍ≤åÏù¥Î®∏ ÌïòÏÖîÎèÑ Îê† Í≤É Í∞ôÏùÄÎç∞Ïöî? üéÆ"
                </div>
                <div class="comment-subtext">
                    Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞ Í∏∞Î∞ò Î∂ÑÏÑù Í≤∞Í≥º
                </div>
            </div>
        </div>

        <!-- üéØ AI Í∏∞Î∞ò Í∞úÏù∏Ìôî ÏΩòÌÖêÏ∏† Ï∂îÏ≤ú ÏÑπÏÖò -->
        <div class="content-recommendation" id="contentRecommendation">
            <div class="content-recommendation-header">
                <div class="content-recommendation-title">
                    <span class="comment-emoji">ü§ñ</span>
                    AIÍ∞Ä Ï∂îÏ≤úÌïòÎäî ÎßûÏ∂§ ÏΩòÌÖêÏ∏†
                </div>
                <div class="content-recommendation-message" id="personalizedMessage">
                    Gemini AIÍ∞Ä ÎãπÏã†Ïùò ÌîåÎ†àÏù¥ Ïä§ÌÉÄÏùºÏùÑ Î∂ÑÏÑùÌï¥ÏÑú ÎßûÏ∂§ ÏòÅÏÉÅÏùÑ Ï∞æÍ≥† ÏûàÏñ¥Ïöî! üîç
                </div>
            </div>

            <div class="video-content-grid" id="videoContentGrid">
                <!-- AI ÏòÅÏÉÅ Ï∂îÏ≤úÏù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê©ÎãàÎã§ -->
                <div class="video-loading">
                    <div class="video-loading-spinner"></div>
                    AIÍ∞Ä ÎßûÏ∂§ ÏòÅÏÉÅÏùÑ Î∂ÑÏÑùÌïòÍ≥† ÏûàÏäµÎãàÎã§...
                </div>
            </div>

            <div class="minigames-section">
                <div class="minigames-title">üéÆ ÎåÄÍ∏∞ ÏãúÍ∞ÑÏö© ÎØ∏ÎãàÍ≤åÏûÑ</div>

                <div class="minigame-item">
                    <div class="minigame-header" onclick="toggleMinigame('reaction-test')">
                        <div class="minigame-title-text">
                            <span class="minigame-icon">‚ö°</span>
                            Î∞òÏùëÏÜçÎèÑ ÌÖåÏä§Ìä∏
                        </div>
                        <div class="minigame-arrow" id="reaction-test-arrow">‚ñº</div>
                    </div>
                    <div class="minigame-content" id="reaction-test-content">
                        <div class="minigame-game-area" id="reaction-test-area">
                            <div class="minigame-description">ÌîÑÎ°úÍ≤åÏù¥Î®∏ ÏàòÏ§ÄÏùò Î∞òÏùëÏÜçÎèÑÎ•º ÌÖåÏä§Ìä∏Ìï¥Î≥¥ÏÑ∏Ïöî!</div>
                            <button class="minigame-start-btn" onclick="startReactionTest('reaction-test-area')">ÌÖåÏä§Ìä∏ ÏãúÏûë</button>
                        </div>
                    </div>
                </div>

                <div class="minigame-item">
                    <div class="minigame-header" onclick="toggleMinigame('snake-game')">
                        <div class="minigame-title-text">
                            <span class="minigame-icon">üêç</span>
                            Î±Ä Í≤åÏûÑ
                        </div>
                        <div class="minigame-arrow" id="snake-game-arrow">‚ñº</div>
                    </div>
                    <div class="minigame-content" id="snake-game-content">
                        <div class="minigame-game-area" id="snake-game-area">
                            <div class="minigame-description">Î±Ä Í≤åÏûÑÏúºÎ°ú ÏßëÏ§ëÎ†•Í≥º ÏàúÎ∞úÎ†•ÏùÑ Ìï®Íªò Í∏∞Î•¥Îäî Í≤åÏûÑ!</div>
                            <button class="minigame-start-btn" onclick="startSnakeGame('snake-game-area')">Í≤åÏûÑ ÏãúÏûë</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÌÜµÍ≥Ñ Í∑∏Î¶¨Îìú -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number" th:text="${estimatedHours}">5707</span>
                <div class="stat-label">Ï∂îÏ†ï ÌîåÎ†àÏù¥ ÏãúÍ∞Ñ<br>(ÏãúÍ∞Ñ)</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" th:text="${winRate != null ? winRate + '%' : 'Ï†ïÎ≥¥ÏóÜÏùå'}">57.2%</span>
                <div class="stat-label">Ï†ÑÏ≤¥ ÏäπÎ•†</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" th:text="${averageKDA != null ? averageKDA : 'Ï†ïÎ≥¥ÏóÜÏùå'}">3.44</span>
                <div class="stat-label">ÏµúÍ∑º ÌèâÍ∑† KDA</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" th:text="${mainChampion != null ? mainChampion : 'Ï†ïÎ≥¥ÏóÜÏùå'}">Taliyah</span>
                <div class="stat-label">Ï£º Ï±îÌîºÏñ∏</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" th:text="${tier != null ? tier : 'Ïñ∏Îû≠'}">CHALLENGER</span>
                <div class="stat-label">ÌòÑÏû¨ Ìã∞Ïñ¥</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" th:text="${lp != null ? lp + 'LP' : '0LP'}">1223LP</span>
                <div class="stat-label">Î¶¨Í∑∏ Ìè¨Ïù∏Ìä∏</div>
            </div>
        </div>

        <!-- Í∞úÏù∏Ìôî Î©òÌä∏Îì§ -->
        <div class="comment-section">
            <div class="comment-card">
                <div class="comment-title">
                    <span class="comment-emoji">üéÆ</span>
                    ÌîåÎ†àÏù¥ Ïä§ÌÉÄÏùº Î∂ÑÏÑù
                </div>
                <div class="comment-text" th:utext="${championComment + '&lt;br&gt;' + kdaComment}">
                    "Taliyah Ïû•Ïù∏Ïù¥ÏãúÍµ∞Ïöî! Î©ãÏûàÏñ¥Ïöî! üëç<br>
                    KDA 3.44... Í≥†ÏàòÏãúÎÑ§Ïöî! üî•"
                </div>
                <div class="comment-subtext">
                    ÏµúÍ∑º 7Í≤ΩÍ∏∞ Í∏∞Ï§Ä Î∂ÑÏÑù Í≤∞Í≥º
                </div>
            </div>

            <div class="comment-card">
                <div class="comment-title">
                    <span class="comment-emoji">üèÜ</span>
                    Îû≠ÌÅ¨ & ÏäπÎ•† Î∂ÑÏÑù
                </div>
                <div class="comment-text" th:utext="${rankComment + '&lt;br&gt;' + winRateComment}">
                    "ÏôÄ... Í≥†ÏàòÏãúÎÑ§Ïöî! Ï°¥Í≤ΩÌï©ÎãàÎã§! üèÜ<br>
                    ÏäπÎ•†Ïù¥ Ï¢ãÏúºÏãúÎÑ§Ïöî! Î∂ÄÎüΩÏäµÎãàÎã§ üòä"
                </div>
                <div class="comment-subtext" th:text="${wins != null ? wins + 'Ïäπ ' + losses + 'Ìå® (LP: ' + lp + ')' : 'Îû≠ÌÅ¨ Í≤åÏûÑ Í∏∞Î°ù Í∏∞Ï§Ä'}">
                    250Ïäπ 187Ìå® (LP: 1223)
                </div>
            </div>

            <div class="comment-card">
                <div class="comment-title">
                    <span class="comment-emoji">üìà</span>
                    ÏµúÍ∑º ÏÑ±Í≥º Î∂ÑÏÑù
                </div>
                <div class="comment-text" th:text="${recentPerformanceComment}">
                    "ÏµúÍ∑º 7Í≤ΩÍ∏∞ Ï§ë 5Ïäπ! Ïª®ÎîîÏÖòÏù¥ Ï¢ãÏúºÏãúÎÑ§Ïöî! üî•"
                </div>
                <div class="comment-subtext" th:text="'ÏµúÍ∑º ' + ${recentTotal} + 'Í≤ΩÍ∏∞ Ï§ë ' + ${recentWins} + 'Ïäπ'">
                    ÏµúÍ∑º 7Í≤ΩÍ∏∞ Ï§ë 5Ïäπ
                </div>
            </div>

            <div class="comment-card">
                <div class="comment-title">
                    <span class="comment-emoji">üí°</span>
                    ÎßûÏ∂§ Ï°∞Ïñ∏
                </div>
                <div class="comment-text">
                    <span th:if="${averageKDA != null and averageKDA < 1.5}">Îç∞Ïä§Î•º Ï§ÑÏù¥Îäî Ïó∞ÏäµÏùÑ Ìï¥Î≥¥ÏÑ∏Ïöî! ÏïàÏ†ÑÌïú ÏúÑÏπòÏóêÏÑú ÌîåÎ†àÏù¥ÌïòÎäî Í≤ÉÏù¥ Ï§ëÏöîÌï¥Ïöî üõ°Ô∏è</span>
                    <span th:if="${winRate != null and winRate < 50}">Ïó∞Ïäµ Î™®ÎìúÏóêÏÑú CS Ïó∞ÏäµÏùÑ Ìï¥Î≥¥ÏãúÎ©¥ Ïã§Î†• Ìñ•ÏÉÅÏóê ÎèÑÏõÄÏù¥ Îê† Í±∞ÏòàÏöî! üìà</span>
                    <span th:if="${tier != null and (tier == 'BRONZE' or tier == 'SILVER')}">ÏôÄÎìúÎ•º Îçî ÎßéÏù¥ ÏÑ§ÏπòÌï¥ÏÑú ÏãúÏïºÎ•º ÌôïÎ≥¥Ìï¥Î≥¥ÏÑ∏Ïöî! üëÄ</span>
                    <span th:if="${averageKDA != null and averageKDA >= 1.5 and winRate != null and winRate >= 50}">Í≥ÑÏÜç ÏßÄÍ∏àÏ≤òÎüº ÌïòÏãúÎ©¥ ÎçîÏö± ÏÑ±Ïû•ÌïòÏã§ Í±∞ÏòàÏöî! ÌôîÏù¥ÌåÖ! üî•</span>
                </div>
                <div class="comment-subtext">
                    Ïã§Î†• Ìñ•ÏÉÅÏùÑ ÏúÑÌïú Ï°∞Ïñ∏
                </div>
            </div>
        </div>

        <!-- Ïï°ÏÖò Î≤ÑÌäºÎì§ -->
        <div class="action-buttons">
            <a href="/result" class="action-btn secondary">Ï†ÑÏ†Å Îã§Ïãú Î≥¥Í∏∞</a>
            <a href="/" class="action-btn secondary">ÏÉàÎ°úÏö¥ Í≤ÄÏÉâ</a>
        </div>
    </div>
</div>

<!-- üåå Cards Galaxy Ï¥àÍ∏∞Ìôî Ïä§ÌÅ¨Î¶ΩÌä∏ -->
<script th:inline="javascript">
    // Thymeleaf Î≥ÄÏàòÎì§ÏùÑ JavaScript Ï†ÑÏó≠ Î≥ÄÏàòÎ°ú ÏÑ§Ï†ï
    window.championRecommendations = /*[[${championRecommendations}]]*/ null;
    window.playerData = {
        name: /*[[${gameName}]]*/ 'Player',
        tagLine: /*[[${tagLine}]]*/ 'TAG',
        winRate: /*[[${winRate}]]*/ 67,
        averageKDA: /*[[${averageKDA}]]*/ 2.4,
        tier: /*[[${tier}]]*/ 'GOLD',
        level: /*[[${userdata?.summonerLevel}]]*/ 100
    };
    window.currentVersion = /*[[${version}]]*/ '14.23.1';

    console.log('üîß Ï†ÑÏó≠ Î≥ÄÏàò ÏÑ§Ï†ï ÏôÑÎ£å:', {
        championRecommendations: window.championRecommendations,
        playerData: window.playerData,
        currentVersion: window.currentVersion
    });
</script>

<script>
    // üé• AI Í∏∞Î∞ò ÏòÅÏÉÅ Ï∂îÏ≤ú ÏãúÏä§ÌÖú
    class AIVideoRecommendationSystem {
        constructor(playerName) {
            this.playerName = playerName;
            this.apiEndpoint = '/api/content/personalized';
            this.retryCount = 0;
            this.maxRetries = 3;
        }

        /**
         * üöÄ AI ÏòÅÏÉÅ Ï∂îÏ≤ú Î°úÎìú
         */
        async loadVideoRecommendations() {
            try {
                console.log('ü§ñ AI ÏòÅÏÉÅ Ï∂îÏ≤ú Î°úÎìú ÏãúÏûë:', this.playerName);

                const response = await fetch(`${this.apiEndpoint}?playerName=${encodeURIComponent(this.playerName)}`);

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                console.log('‚úÖ AI ÏòÅÏÉÅ Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', data);

                this.renderVideoRecommendations(data);
                this.updatePersonalizedMessage(data.personalizedMessage);

            } catch (error) {
                console.error('‚ùå AI ÏòÅÏÉÅ Î°úÎìú Ïã§Ìå®:', error);
                this.handleVideoLoadError(error);
            }
        }

        /**
         * üé® ÏòÅÏÉÅ Ï∂îÏ≤ú Î†åÎçîÎßÅ
         */
        renderVideoRecommendations(data) {
            const container = document.getElementById('videoContentGrid');
            if (!container) return;

            if (!data.videoContents || data.videoContents.length === 0) {
                this.renderNoVideosState();
                return;
            }

            // ÏòÅÏÉÅ Ïπ¥ÎìúÎì§ ÏÉùÏÑ±
            const videoCards = data.videoContents.map(video => this.createVideoCard(video)).join('');
            container.innerHTML = videoCards;

            // ÏàúÏ∞®Ï†Å Ïï†ÎãàÎ©îÏù¥ÏÖò Ìö®Í≥º
            this.animateVideoCards();
        }

        /**
         * üé¨ ÏòÅÏÉÅ Ïπ¥Îìú ÏÉùÏÑ±
         */
        createVideoCard(video) {
            const thumbnailUrl = video.thumbnailUrl || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMyMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMTgwIiBmaWxsPSIjNjY3ZWVhIiByeD0iMTAiLz4KPHN2ZyB4PSIxMjAiIHk9IjYwIiB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSI+Cjxwb2x5Z29uIHBvaW50cz0iMjAsMTAgNjAsMzAgMjAsNTAiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiLz4KPC9zdmc+Cjx0ZXh0IHg9IjE2MCIgeT0iMTQwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkFJIOy2lOyynCDrr7jsp4A8L3RleHQ+Cjwvc3ZnPg==';
            const channelName = video.channelTitle || 'AI Ï∂îÏ≤ú';
            const relevanceScore = video.relevanceScore ? Math.round(video.relevanceScore * 100) : 85;
            const shortTitle = video.title.length > 50 ? video.title.substring(0, 50) + '...' : video.title;
            const shortDescription = video.description.length > 80 ? video.description.substring(0, 80) + '...' : video.description;

            return `
                <div class="video-content-item" onclick="openVideo('${video.url}')">
                    <div class="video-thumbnail">
                        <img src="${thumbnailUrl}" alt="${video.title}"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDMyMCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMjAiIGhlaWdodD0iMTgwIiBmaWxsPSIjNjY3ZWVhIiByeD0iMTAiLz4KPHN2ZyB4PSIxMjAiIHk9IjYwIiB3aWR0aD0iODAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA4MCA2MCIgZmlsbD0ibm9uZSI+Cjxwb2x5Z29uIHBvaW50cz0iMjAsMTAgNjAsMzAgMjAsNTAiIGZpbGw9IndoaXRlIiBvcGFjaXR5PSIwLjgiLz4KPC9zdmc+Cjx0ZXh0IHg9IjE2MCIgeT0iMTQwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkFJIOy2lOyynCDrr7jsp4A8L3RleHQ+Cjwvc3ZnPg=='">
                        <div class="video-play-icon">‚ñ∂</div>
                    </div>
                    <div class="video-info">
                        <div class="video-title">${shortTitle}</div>
                        <div class="video-description">${shortDescription}</div>
                        <div class="video-meta">
                            <div class="video-channel">${channelName}</div>
                            <div class="video-relevance">${relevanceScore}% Ï∂îÏ≤ú</div>
                        </div>
                    </div>
                </div>
            `;
        }

        /**
         * üì∫ ÏòÅÏÉÅ Ïó¥Í∏∞
         */
        openVideo(url) {
            if (url && url.startsWith('http')) {
                window.open(url, '_blank');
            } else {
                console.error('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ URL:', url);
                alert('ÏòÅÏÉÅÏùÑ Ïó¥ Ïàò ÏóÜÏäµÎãàÎã§. Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');
            }
        }

        /**
         * üí´ ÏòÅÏÉÅ Ïπ¥Îìú Ïï†ÎãàÎ©îÏù¥ÏÖò
         */
        animateVideoCards() {
            const cards = document.querySelectorAll('.video-content-item');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';

                setTimeout(() => {
                    card.style.transition = 'all 0.6s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 200 + 300);
            });
        }

        /**
         * üí¨ Í∞úÏù∏Ìôî Î©îÏãúÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
         */
        updatePersonalizedMessage(message) {
            const messageElement = document.getElementById('personalizedMessage');
            if (messageElement && message) {
                messageElement.textContent = message;
            }
        }

        /**
         * üö´ ÏòÅÏÉÅ ÏóÜÏùå ÏÉÅÌÉú Î†åÎçîÎßÅ
         */
        renderNoVideosState() {
            const container = document.getElementById('videoContentGrid');
            container.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #ccc;">
                    <div style="font-size: 3rem; margin-bottom: 20px;">ü§ñ</div>
                    <div style="font-size: 1.2rem; margin-bottom: 10px;">AIÍ∞Ä ÏïÑÏßÅ Î∂ÑÏÑù Ï§ëÏù¥ÏóêÏöî!</div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">ÌîåÎ†àÏù¥ Îç∞Ïù¥ÌÑ∞Î•º Îçî ÏàòÏßëÌïú ÌõÑ ÎßûÏ∂§ ÏòÅÏÉÅÏùÑ Ï∂îÏ≤úÌï¥ÎìúÎ¶¥Í≤åÏöî.</div>
                </div>
            `;
        }

        /**
         * ‚ùå ÏóêÎü¨ ÏÉÅÌÉú Ï≤òÎ¶¨
         */
        handleVideoLoadError(error) {
            this.retryCount++;

            if (this.retryCount <= this.maxRetries) {
                console.log(`üîÑ Ïû¨ÏãúÎèÑ ${this.retryCount}/${this.maxRetries}...`);
                setTimeout(() => this.loadVideoRecommendations(), 2000 * this.retryCount);
                return;
            }

            const container = document.getElementById('videoContentGrid');
            container.innerHTML = `
                <div class="video-error" style="grid-column: 1 / -1;">
                    <div style="font-size: 2rem; margin-bottom: 15px;">‚ö†Ô∏è</div>
                    <div style="font-size: 1.1rem; margin-bottom: 10px;">AI ÏòÅÏÉÅ Ï∂îÏ≤úÏùÑ Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏñ¥Ïöî</div>
                    <div style="font-size: 0.9rem; margin-bottom: 15px;">ÎÑ§Ìä∏ÏõåÌÅ¨Î•º ÌôïÏù∏ÌïòÍ±∞ÎÇò Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.</div>
                    <button class="retry-btn" onclick="retryVideoLoad()">Îã§Ïãú ÏãúÎèÑ</button>
                </div>
            `;
        }
    }

    // üåå Î©îÏù∏ Ï¥àÍ∏∞Ìôî Ìï®Ïàò
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üåå Í∞úÏù∏Ìôî Î∂ÑÏÑù ÌéòÏù¥ÏßÄ Ï¥àÍ∏∞Ìôî ÏãúÏûë');

        // Ï†ÑÏó≠ Î≥ÄÏàò ÏÑ§Ï†ï Î∞è Í≤ÄÏ¶ù
        window.playerData = window.playerData || {
            name: /*[[${gameName}]]*/ 'Player',
            level: /*[[${userdata?.summonerLevel}]]*/ 100,
            tier: /*[[${tier}]]*/ 'GOLD',
            winRate: /*[[${winRate}]]*/ 67,
            averageKDA: /*[[${averageKDA}]]*/ 2.4
        };

        window.currentVersion = window.currentVersion || /*[[${version}]]*/ '14.23.1';

        console.log('üîß Îç∞Ïù¥ÌÑ∞ ÌôïÏù∏:', {
            playerData: window.playerData,
            currentVersion: window.currentVersion,
            championRecommendations: window.championRecommendations ? 'ÏûàÏùå' : 'ÏóÜÏùå'
        });

        // AI ÏòÅÏÉÅ Ï∂îÏ≤ú ÏãúÏä§ÌÖú Ï¥àÍ∏∞Ìôî
        window.aiVideoSystem = new AIVideoRecommendationSystem(window.playerData.name);

        // ÏßÄÏó∞ ÌõÑ Ï¥àÍ∏∞Ìôî (DOM ÏôÑÏ†Ñ Î°úÎìú ÎåÄÍ∏∞)
        setTimeout(() => {
            try {
                // Cards Galaxy ÏãúÏä§ÌÖú Ï¥àÍ∏∞Ìôî
                initializeCardsGalaxy();

                // AI ÏòÅÏÉÅ Ï∂îÏ≤ú Î°úÎìú
                window.aiVideoSystem.loadVideoRecommendations();

            } catch (error) {
                console.error('‚ùå Ï¥àÍ∏∞Ìôî Ïã§Ìå®:', error);
                createFallbackSystems();
            }
        }, 1500); // 1.5Ï¥à ÏßÄÏó∞
    });

    /**
     * üåå Cards Galaxy Ï¥àÍ∏∞Ìôî
     */
    function initializeCardsGalaxy() {
        try {
            // 1Ï∞®: ÏõêÎ≥∏ CardsGalaxySystem ÏãúÎèÑ
            if (typeof CardsGalaxySystem !== 'undefined' && window.championRecommendations) {
                console.log('‚úÖ ÏõêÎ≥∏ Cards Galaxy ÏãúÏä§ÌÖú ÏÇ¨Ïö©');
                window.galaxySystem = new CardsGalaxySystem(
                    window.championRecommendations,
                    window.playerData,
                    window.currentVersion
                );
                return;
            }

            // 2Ï∞®: CardsGalaxySystemÏù¥ ÏûàÏßÄÎßå Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÎäî Í≤ΩÏö∞ API ÏãúÎèÑ
            if (typeof CardsGalaxySystem !== 'undefined') {
                console.log('üîÑ APIÎ•º ÌÜµÌïú Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏãúÎèÑ');
                fetchGalaxyDataAndInit();
                return;
            }

            // 3Ï∞®: ÏôÑÏ†Ñ Ìè¥Î∞± ÏãúÏä§ÌÖú ÏÇ¨Ïö©
            console.log('üõ°Ô∏è Ìè¥Î∞± ÏãúÏä§ÌÖú ÏÇ¨Ïö©');
            createFallbackGalaxySystem();

        } catch (error) {
            console.error('‚ùå Cards Galaxy Ï¥àÍ∏∞Ìôî Ïã§Ìå®:', error);
            createFallbackGalaxySystem();
        }
    }

    /**
     * üõ°Ô∏è Ìè¥Î∞± ÏãúÏä§ÌÖúÎì§ ÏÉùÏÑ±
     */
    function createFallbackSystems() {
        createFallbackGalaxySystem();
        createFallbackVideoRecommendations();
    }

    /**
     * üì∫ Ìè¥Î∞± ÏòÅÏÉÅ Ï∂îÏ≤ú ÏÉùÏÑ±
     */
    function createFallbackVideoRecommendations() {
        const container = document.getElementById('videoContentGrid');
        if (!container) return;

        const fallbackVideos = [
            {
                title: "Î°§ Í∏∞Ï¥à Í∞ÄÏù¥Îìú - Ï¥àÎ≥¥ÏûêÎ•º ÏúÑÌïú ÏôÑÎ≤Ω Ï†ïÎ¶¨",
                description: "Î¶¨Í∑∏Ïò§Î∏åÎ†àÏ†ÑÎìúÎ•º Ï≤òÏùå ÏãúÏûëÌïòÎäî Î∂ÑÎì§ÏùÑ ÏúÑÌïú ÌïµÏã¨ Í∞ÄÏù¥ÎìúÏûÖÎãàÎã§.",
                url: "https://youtube.com/watch?v=guide1",
                channelTitle: "LoL Guide",
                relevanceScore: 0.85
            },
            {
                title: "Îû≠ÌÅ¨ ÏäπÍ∏âÏùÑ ÏúÑÌïú ÌïÑÏàò ÌåÅ Î™®Ïùå",
                description: "ÏÉÅÏúÑ Ìã∞Ïñ¥Î°ú Ïò¨ÎùºÍ∞ÄÍ∏∞ ÏúÑÌïú Ïã§Ï†Ñ ÎÖ∏ÌïòÏö∞Î•º Í≥µÍ∞úÌï©ÎãàÎã§.",
                url: "https://youtube.com/watch?v=guide2",
                channelTitle: "Pro Gaming",
                relevanceScore: 0.90
            }
        ];

        const videoCards = fallbackVideos.map(video => window.aiVideoSystem.createVideoCard(video)).join('');
        container.innerHTML = videoCards;

        // Ïï†ÎãàÎ©îÏù¥ÏÖò Ï†ÅÏö©
        window.aiVideoSystem.animateVideoCards();

        // Î©îÏãúÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
        const messageElement = document.getElementById('personalizedMessage');
        if (messageElement) {
            messageElement.textContent = 'Í∏∞Î≥∏ Ï∂îÏ≤ú ÏòÅÏÉÅÏùÑ Ï§ÄÎπÑÌñàÏñ¥Ïöî! Îçî Ï†ïÌôïÌïú Ï∂îÏ≤úÏùÑ ÏúÑÌï¥ÏÑúÎäî Îçî ÎßéÏùÄ Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞Í∞Ä ÌïÑÏöîÌï¥Ïöî üìä';
        }
    }

    // üåå Ìè¥Î∞± Cards Galaxy ÏãúÏä§ÌÖú (ÎèÖÎ¶Ω Ïã§Ìñâ Í∞ÄÎä•)
    function createFallbackGalaxySystem() {
        console.log('üõ°Ô∏è Ìè¥Î∞± Cards Galaxy ÏãúÏä§ÌÖú Ïã§Ìñâ');

        const container = document.getElementById('galaxyContainer');
        if (!container) {
            console.error('galaxyContainerÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
            return;
        }

        // Í∏∞Î≥∏ Íµ¨Ï°∞ ÏÉùÏÑ±
        container.innerHTML = `
            <div class="stars"></div>
            <div class="orbit-ring ring-1"></div>
            <div class="orbit-ring ring-2"></div>
            <div class="orbit-ring ring-3"></div>
            <div class="champion-cards-container" id="championCards"></div>
            <div class="player-hub">
                <div class="player-info">
                    <div style="color: white; font-size: 1.1rem; font-weight: bold; margin-bottom: 5px;">${window.playerData.name}</div>
                    <div style="color: #4ecdc4; font-size: 0.9rem; margin-bottom: 3px;">Î†àÎ≤® ${window.playerData.level}</div>
                    <div style="color: #ffc107; font-size: 0.8rem; margin-bottom: 5px;">${window.playerData.tier}</div>
                    <div style="color: rgba(255,255,255,0.7); font-size: 0.7rem;">${window.playerData.winRate}% ÏäπÎ•†</div>
                </div>
            </div>
        `;

        // Î≥Ñ Ïï†ÎãàÎ©îÏù¥ÏÖò Ï∂îÍ∞Ä
        createStars();

        // Ï±îÌîºÏñ∏ Ïπ¥Îìú ÏÉùÏÑ±
        createChampionCards();

        console.log('‚úÖ Ìè¥Î∞± Cards Galaxy ÏãúÏä§ÌÖú ÏôÑÎ£å');
    }

    function createStars() {
        const starsContainer = document.querySelector('#galaxyContainer .stars');
        if (!starsContainer) return;

        for (let i = 0; i < 80; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            star.style.animationDuration = (Math.random() * 2 + 1) + 's';
            starsContainer.appendChild(star);
        }
    }

    function createChampionCards() {
        const container = document.getElementById('championCards');
        if (!container) return;

        // APIÏóêÏÑú Í∞ÄÏ†∏Ïò® Îç∞Ïù¥ÌÑ∞ Ïö∞ÏÑ† ÏÇ¨Ïö©, ÏóÜÏúºÎ©¥ Mock Îç∞Ïù¥ÌÑ∞
        let championData = [];

        // Î∞±ÏóîÎìú Ï∂îÏ≤ú Îç∞Ïù¥ÌÑ∞ ÌôïÏù∏
        if (window.championRecommendations && window.championRecommendations.recommendations) {
            championData = window.championRecommendations.recommendations.slice(0, 12).map(rec => ({
                name: rec.championName,
                role: rec.primaryRole,
                confidence: Math.round(rec.confidenceScore * 100),
                tags: generateChampionTags(rec)
            }));
        } else {
            // Mock Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö© (12Í∞úÎ°ú ÌôïÏû•)
            championData = [
                { name: 'Jinx', role: 'ADC', confidence: 92, tags: ['meta', 'personal'] },
                { name: 'Yasuo', role: 'MID', confidence: 85, tags: ['style'] },
                { name: 'Thresh', role: 'SUPPORT', confidence: 88, tags: ['meta'] },
                { name: 'Lee Sin', role: 'JUNGLE', confidence: 90, tags: ['personal'] },
                { name: 'Garen', role: 'TOP', confidence: 83, tags: ['style'] },
                { name: 'Ahri', role: 'MID', confidence: 87, tags: ['meta'] },
                { name: 'Caitlyn', role: 'ADC', confidence: 84, tags: ['personal'] },
                { name: 'Leona', role: 'SUPPORT', confidence: 89, tags: ['meta', 'style'] },
                { name: 'Graves', role: 'JUNGLE', confidence: 86, tags: ['meta'] },
                { name: 'Fiora', role: 'TOP', confidence: 82, tags: ['style'] },
                { name: 'Lux', role: 'MID', confidence: 81, tags: ['personal'] },
                { name: 'Braum', role: 'SUPPORT', confidence: 80, tags: ['style'] }
            ];
        }

        console.log('üìä Ï±îÌîºÏñ∏ Îç∞Ïù¥ÌÑ∞:', championData);

        championData.forEach((champion, index) => {
            const card = document.createElement('div');
            card.className = 'champion-card';

            // Í∂§ÎèÑ Î∞∞Ïπò (4Í∞úÏî© 3Í∞ú Í∂§ÎèÑÏóê Î∞∞Ïπò)
            const orbit = Math.floor(index / 4) + 1; // 1, 2, 3
            card.classList.add(`orbit-${orbit}`);

            // Í∂§ÎèÑ ÎÇ¥ ÏãúÏûë Í∞ÅÎèÑ ÏÑ§Ï†ï (Í∞Å Ïπ¥ÎìúÎßàÎã§ 90ÎèÑÏî© Ï∞®Ïù¥)
            const angleInOrbit = (index % 4) * 90;
            card.style.setProperty('--start-angle', `${angleInOrbit}deg`);

            // Ïπ¥Îìú ÎÇ¥Ïö© ÏÉùÏÑ±
            const tags = champion.tags.map(tag =>
                `<span class="champion-tag ${tag}">${getTagLabel(tag)}</span>`
            ).join('');

            card.innerHTML = `
                <div class="champion-avatar">
                    <img src="https://ddragon.leagueoflegends.com/cdn/${window.currentVersion}/img/champion/${champion.name}.png"
                         alt="${champion.name}"
                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzAiIGhlaWdodD0iNzAiIHZpZXdCb3g9IjAgMCA3MCA3MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjcwIiBoZWlnaHQ9IjcwIiBmaWxsPSIjNjY3ZWVhIiByeD0iMzUiLz4KPHRleHQgeD0iMzUiIHk9IjQwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIyMCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPj88L3RleHQ+Cjwvc3ZnPg=='">
                </div>
                <div class="champion-name">${champion.name}</div>
                <div class="champion-role">${champion.role}</div>
                <div class="confidence-score">${champion.confidence}%</div>
                <div class="champion-tags">${tags}</div>
            `;

            // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä
            card.addEventListener('click', () => showChampionDetails(champion));

            container.appendChild(card);

            // ÏàúÏ∞®Ï†Å Îì±Ïû• Ïï†ÎãàÎ©îÏù¥ÏÖò
            setTimeout(() => {
                card.classList.add('visible');
            }, index * 200 + 1500); // 1.5Ï¥à ÌõÑÎ∂ÄÌÑ∞ ÏãúÏûë
        });
    }

    function generateChampionTags(rec) {
        const tags = [];
        if (rec.personalStats) tags.push('personal');
        if (rec.metaStrength >= 8.0) tags.push('meta');
        if (rec.styleMatch >= 0.8) tags.push('style');
        return tags;
    }

    function getTagLabel(tag) {
        const labels = {
            'meta': 'Î©îÌÉÄ',
            'personal': 'Í∞úÏù∏',
            'style': 'Ïä§ÌÉÄÏùº'
        };
        return labels[tag] || tag;
    }

    function showChampionDetails(champion) {
        alert(`üåü ${champion.name}\nÎùºÏù∏: ${champion.role}\nÏ∂îÏ≤úÎèÑ: ${champion.confidence}%\n\nOP.GGÏóêÏÑú Îçî ÏûêÏÑ∏Ìïú Ï†ïÎ≥¥Î•º ÌôïÏù∏ÌïòÏÑ∏Ïöî!`);

        // OP.GG ÎßÅÌÅ¨ Ïó¥Í∏∞ (ÏÑ†ÌÉùÏÇ¨Ìï≠)
        if (confirm('OP.GGÏóêÏÑú Ïù¥ Ï±îÌîºÏñ∏Ïùò ÏÉÅÏÑ∏ Ï†ïÎ≥¥Î•º Î≥¥ÏãúÍ≤†ÏäµÎãàÍπå?')) {
            window.open(`https://www.op.gg/champions/${champion.name.toLowerCase()}/build`, '_blank');
        }
    }

    // APIÎ•º ÌÜµÌïú Îç∞Ïù¥ÌÑ∞ Î°úÎìú Î∞è Ï¥àÍ∏∞Ìôî
    async function fetchGalaxyDataAndInit() {
        try {
            const playerName = window.playerData.name || 'Player';
            const apiUrl = `/api/v2/recommendations/galaxy?playerName=${encodeURIComponent(playerName)}&count=12`;

            console.log('üì° API ÏöîÏ≤≠:', apiUrl);

            const response = await fetch(apiUrl);

            if (!response.ok) {
                throw new Error(`HTTP ${response.status}: ${response.statusText}`);
            }

            const data = await response.json();
            console.log('üì° API Îç∞Ïù¥ÌÑ∞ Î°úÎìú ÏÑ±Í≥µ:', data);

            if (!data.champions || data.champions.length === 0) {
                throw new Error('API ÏùëÎãµÏóê Ï±îÌîºÏñ∏ Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§');
            }

            // API Îç∞Ïù¥ÌÑ∞Î•º recommendationResult ÌòïÌÉúÎ°ú Î≥ÄÌôò
            const apiRecommendations = {
                recommendations: data.champions.map(champion => ({
                    championName: champion.name,
                    primaryRole: champion.role,
                    confidenceScore: champion.confidence / 100,
                    metaStrength: champion.tier === 'S' ? 9 : champion.tier === 'A' ? 7 : 5,
                    styleMatch: champion.styleMatch / 100,
                    personalStats: champion.type === 'personal' ? {} : null
                })),
                personalizedMessage: data.message || 'AI Ï∂îÏ≤ú Ï±îÌîºÏñ∏Îì§ÏùÑ ÎßåÎÇòÎ≥¥ÏÑ∏Ïöî!',
                playerProfile: {
                    playStyle: { primaryStyle: data.playerStyle || 'BALANCED' }
                }
            };

            // Cards Galaxy ÏãúÏä§ÌÖú Ï¥àÍ∏∞Ìôî
            window.galaxySystem = new CardsGalaxySystem(
                apiRecommendations,
                window.playerData,
                window.currentVersion
            );

            console.log('‚úÖ API Í∏∞Î∞ò Cards Galaxy Ï¥àÍ∏∞Ìôî ÏôÑÎ£å');

        } catch (error) {
            console.error('‚ùå API Î°úÎìú Ïã§Ìå®, Ìè¥Î∞± ÏãúÏä§ÌÖú ÏÇ¨Ïö©:', error);
            createFallbackGalaxySystem();
        }
    }

    // Ï†ÑÏó≠ Ìï®ÏàòÎì§
    window.openVideo = function(url) {
        if (window.aiVideoSystem) {
            window.aiVideoSystem.openVideo(url);
        }
    };

    window.retryVideoLoad = function() {
        if (window.aiVideoSystem) {
            window.aiVideoSystem.retryCount = 0;
            window.aiVideoSystem.loadVideoRecommendations();
        }
    };

    // Ï†ÑÏó≠ ÎîîÎ≤ÑÍπÖ Ìï®ÏàòÎì§
    window.galaxyDebug = {
        reload: function() {
            console.log('üîÑ ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ®');
            location.reload();
        },

        testVideoAPI: function() {
            console.log('üß™ ÏòÅÏÉÅ API ÌÖåÏä§Ìä∏ ÏãúÏûë');
            fetch('/api/content/personalized?playerName=test')
                .then(response => response.json())
                .then(data => {
                    console.log('‚úÖ ÏòÅÏÉÅ API ÌÖåÏä§Ìä∏ Í≤∞Í≥º:', data);
                    alert('ÏòÅÏÉÅ API ÌÖåÏä§Ìä∏ ÏÑ±Í≥µ! ÏΩòÏÜîÏùÑ ÌôïÏù∏ÌïòÏÑ∏Ïöî.');
                })
                .catch(error => {
                    console.error('‚ùå ÏòÅÏÉÅ API ÌÖåÏä§Ìä∏ Ïã§Ìå®:', error);
                    alert('ÏòÅÏÉÅ API ÌÖåÏä§Ìä∏ Ïã§Ìå®: ' + error.message);
                });
        },

        getSystemInfo: function() {
            const info = {
                galaxySystem: window.galaxySystem ? 'ÏûàÏùå' : 'ÏóÜÏùå',
                aiVideoSystem: window.aiVideoSystem ? 'ÏûàÏùå' : 'ÏóÜÏùå',
                CardsGalaxySystem: typeof CardsGalaxySystem,
                playerData: window.playerData,
                championRecommendations: window.championRecommendations ? 'ÏûàÏùå' : 'ÏóÜÏùå',
                currentVersion: window.currentVersion
            };
            console.log('üîç ÏãúÏä§ÌÖú Ï†ïÎ≥¥:', info);
            return info;
        },

        forceFallback: function() {
            console.log('üõ°Ô∏è Í∞ïÏ†ú Ìè¥Î∞± Ïã§Ìñâ');
            createFallbackSystems();
        },

        recreate: function() {
            console.log('üîÑ ÏãúÏä§ÌÖú Ïû¨ÏÉùÏÑ±');
            const container = document.getElementById('galaxyContainer');
            if (container) {
                container.innerHTML = `
                    <div class="loading-placeholder">
                        <div style="font-size: 2rem; margin-bottom: 20px;">üåå</div>
                        <div style="font-size: 1.2rem; margin-bottom: 10px;">ÏãúÏä§ÌÖú Ïû¨Î°úÎî© Ï§ë...</div>
                        <div style="color: rgba(255,255,255,0.7);">Ïû†ÏãúÎßå Í∏∞Îã§Î†§Ï£ºÏÑ∏Ïöî.</div>
                    </div>
                `;

                setTimeout(() => {
                    createFallbackSystems();
                }, 1000);
            }
        }
    };

    // ÌéòÏù¥ÏßÄ Ïñ∏Î°úÎìú Ïãú Ï†ïÎ¶¨
    window.addEventListener('beforeunload', function() {
        if (window.galaxySystem && typeof window.galaxySystem.destroy === 'function') {
            window.galaxySystem.destroy();
        }
    });

    console.log('üéÆ AI Í∏∞Î∞ò Í∞úÏù∏Ìôî Î∂ÑÏÑù Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎìú ÏôÑÎ£å');
    console.log('üí° ÎîîÎ≤ÑÍπÖ: window.galaxyDebug.getSystemInfo() Î°ú ÏãúÏä§ÌÖú ÏÉÅÌÉú ÌôïÏù∏');
    console.log('üîß Í∞ïÏ†ú Ìè¥Î∞±: window.galaxyDebug.forceFallback() Ïã§Ìñâ');
    console.log('üîÑ Ïû¨ÏÉùÏÑ±: window.galaxyDebug.recreate() Ïã§Ìñâ');
    console.log('üì∫ ÏòÅÏÉÅ API ÌÖåÏä§Ìä∏: window.galaxyDebug.testVideoAPI() Ïã§Ìñâ');

    // ===== üéØ Ï±îÌîºÏñ∏ Î£∞Î†õ ÏãúÏä§ÌÖú =====
    const championData = {
        // ========== ADC Ï±îÌîºÏñ∏Îì§ ==========
        'Jinx': { role: 'ADC', tip: 'ÎØ∏ÎãàÏñ∏ÏùÑ ÎßéÏù¥ Ïû°Í≥† ÏÑ±Ïû•ÌïòÏÑ∏Ïöî!' },
        'Caitlyn': { role: 'ADC', tip: 'ÏõêÍ±∞Î¶¨ÏóêÏÑú Í≤¨Ï†úÌïòÎ©∞ ÏïàÏ†ÑÌïòÍ≤å!' },
        'Ezreal': { role: 'ADC', tip: 'QÏä§ÌÇ¨Î°ú Íæ∏Ï§ÄÌûà Í≤¨Ï†úÌï¥Î≥¥ÏÑ∏Ïöî!' },
        'Vayne': { role: 'ADC', tip: 'ÌõÑÎ∞òÏóê Í∞ïÌïú Ï±îÌîºÏñ∏Ïù¥ÏóêÏöî!' },
        'Ashe': { role: 'ADC', tip: 'Í∂ÅÍ∑πÍ∏∞Î°ú Ïù¥ÎãàÏãúÎ•º Í±∏Ïñ¥Î≥¥ÏÑ∏Ïöî!' },
        'Jhin': { role: 'ADC', tip: '4Î≤àÏß∏ Ï¥ùÏïåÏùò ÏúÑÎ†•ÏùÑ ÌôúÏö©ÌïòÏÑ∏Ïöî!' },
        'Lucian': { role: 'ADC', tip: 'Í∏∞ÎèôÏÑ±ÏùÑ ÏÇ¥Î†§ ÌÇ¨ÏùÑ Îî∞Î≥¥ÏÑ∏Ïöî!' },
        'Kai\'Sa': { role: 'ADC', tip: 'ÏßÑÌôîÌïú Ïä§ÌÇ¨Îì§Ïùò ÏãúÎÑàÏßÄÎ•º ÎÖ∏Î†§Î≥¥ÏÑ∏Ïöî!' },
        'Miss Fortune': { role: 'ADC', tip: 'Í∂ÅÍ∑πÍ∏∞ ÌÉÑÎßâÏúºÎ°ú ÌåÄÌååÏù¥Ìä∏Î•º Ï†úÏïïÌïòÏÑ∏Ïöî!' },
        'Tristana': { role: 'ADC', tip: 'Ï†êÌîÑÎ°ú ÏúÑÌóòÏóêÏÑú ÌÉàÏ∂úÌïòÏÑ∏Ïöî!' },

        // ========== SUPPORT Ï±îÌîºÏñ∏Îì§ ==========
        'Thresh': { role: 'SUPPORT', tip: 'Í∞àÍ≥†Î¶¨Î°ú Ï†ÅÏùÑ ÎÅåÏñ¥ÏôÄÎ≥¥ÏÑ∏Ïöî!' },
        'Leona': { role: 'SUPPORT', tip: 'ÌÉúÏñëÏùò ÌûòÏúºÎ°ú ÏïÑÍµ∞ÏùÑ Î≥¥Ìò∏ÌïòÏÑ∏Ïöî!' },
        'Soraka': { role: 'SUPPORT', tip: 'ÌûêÎ°ú ÏïÑÍµ∞ÏùÑ ÏÇ¥Î†§Ï£ºÏÑ∏Ïöî!' },
        'Lulu': { role: 'SUPPORT', tip: 'Ìè¥Î¶¨Î™®ÌîÑÎ°ú Ï†ÅÏùÑ Î¨¥Î†•ÌôîÏãúÌÇ§ÏÑ∏Ïöî!' },
        'Nautilus': { role: 'SUPPORT', tip: 'ÏïµÏª§Î°ú Ï†ÅÏùÑ Ïû°ÏïÑÎÅÑÏÑ∏Ïöî!' },
        'Blitzcrank': { role: 'SUPPORT', tip: 'Î°úÏºì ÏÜêÏúºÎ°ú Ï†ÅÏùÑ ÎãπÍ≤®Ïò§ÏÑ∏Ïöî!' },
        'Yuumi': { role: 'SUPPORT', tip: 'ÏïÑÍµ∞ÏóêÍ≤å Î∂ôÏñ¥ÏÑú Î≤ÑÌîÑÎ•º Ï£ºÏÑ∏Ïöî!' },
        'Pyke': { role: 'SUPPORT', tip: 'ÏùÄÏã†ÏúºÎ°ú Í∏∞ÏäµÌï¥Î≥¥ÏÑ∏Ïöî!' },
        'Braum': { role: 'SUPPORT', tip: 'Î∞©Ìå®Î°ú ÏïÑÍµ∞ÏùÑ ÏßÄÏºúÏ£ºÏÑ∏Ïöî!' },
        'Alistar': { role: 'SUPPORT', tip: 'Ìô©ÏÜåÏùò ÌûòÏúºÎ°ú Ï†ÅÏùÑ Îì§Ïù¥Î∞õÏúºÏÑ∏Ïöî!' },

        // ========== JUNGLE Ï±îÌîºÏñ∏Îì§ ==========
        'Lee Sin': { role: 'JUNGLE', tip: 'ÌÇ•ÏúºÎ°ú Ï†ÅÏùÑ ÎÇ†Î†§Î≤ÑÎ¶¨ÏÑ∏Ïöî!' },
        'Graves': { role: 'JUNGLE', tip: 'Ï¥ùÏúºÎ°ú Ï†ïÍ∏ÄÏùÑ Ï†ïÎ¶¨ÌïòÏÑ∏Ïöî!' },
        'Kha\'Zix': { role: 'JUNGLE', tip: 'Í≥†Î¶ΩÎêú Ï†ÅÏùÑ ÎÖ∏Î†§Î≥¥ÏÑ∏Ïöî!' },
        'Master Yi': { role: 'JUNGLE', tip: 'ÏïåÌåå Ïä§Ìä∏ÎùºÏù¥ÌÅ¨Î°ú Ï†ÅÏùÑ Î≤†Ïñ¥Î≥¥ÏÑ∏Ïöî!' },
        'Hecarim': { role: 'JUNGLE', tip: 'ÎßêÏùò ÏÜçÎèÑÎ°ú Ï†ÅÏßÑÏùÑ Îö´Í≥† Îì§Ïñ¥Í∞ÄÏÑ∏Ïöî!' },
        'Elise': { role: 'JUNGLE', tip: 'Í±∞ÎØ∏ ÌòïÌÉúÎ•º ÌôúÏö©Ìï¥Î≥¥ÏÑ∏Ïöî!' },
        'Evelynn': { role: 'JUNGLE', tip: 'ÏùÄÏã†ÏúºÎ°ú Í∏∞Ïäµ ÏïîÏÇ¥ÏùÑ ÎÖ∏Î†§Î≥¥ÏÑ∏Ïöî!' },
        'Rengar': { role: 'JUNGLE', tip: 'ÏàòÌíÄÏóêÏÑú Ï†êÌîÑ Í≥µÍ≤©ÌïòÏÑ∏Ïöî!' },
        'Warwick': { role: 'JUNGLE', tip: 'ÎäëÎåÄÏùò Î≥∏Îä•ÏúºÎ°ú ÏÇ¨ÎÉ•ÌïòÏÑ∏Ïöî!' },
        'Ammu': { role: 'JUNGLE', tip: 'ÎØ∏ÎùºÏùò Ïä¨ÌîîÏúºÎ°ú Ï†ÅÎì§ÏùÑ Î¨∂Ïñ¥Î≥¥ÏÑ∏Ïöî!' },

        // ========== TOP Ï±îÌîºÏñ∏Îì§ ==========
        'Garen': { role: 'TOP', tip: 'ÌöåÏ†ÑÎ≤†Í∏∞Î°ú Ï†ÅÏùÑ Ïì∏Ïñ¥Î≤ÑÎ¶¨ÏÑ∏Ïöî!' },
        'Darius': { role: 'TOP', tip: 'ÎèÑÎÅºÎ°ú Ï†ÅÏùÑ Ï≤òÎã®ÌïòÏÑ∏Ïöî!' },
        'Fiora': { role: 'TOP', tip: 'Í∏âÏÜåÎ•º ÎÖ∏Î†§ Ïö∞ÏïÑÌïòÍ≤å Ïã∏Ïö∞ÏÑ∏Ïöî!' },
        'Jax': { role: 'TOP', tip: 'Î∞òÍ≤©ÏúºÎ°ú Ï†ÅÏùò Í≥µÍ≤©ÏùÑ ÎßâÏïÑÎ≥¥ÏÑ∏Ïöî!' },
        'Irelia': { role: 'TOP', tip: 'ÏπºÎÇ† Ï∂§ÏúºÎ°ú Ï†ÅÏùÑ Î≤†Ïñ¥Î≥¥ÏÑ∏Ïöî!' },
        'Malphite': { role: 'TOP', tip: 'Î∞îÏúÑÍ∞ôÏùÄ ÌÉ±ÌÇπÏúºÎ°ú ÏïÑÍµ∞ÏùÑ Î≥¥Ìò∏ÌïòÏÑ∏Ïöî!' },
        'Riven': { role: 'TOP', tip: 'ÏΩ§Î≥¥Î°ú Ï†ÅÏùÑ ÏïïÎèÑÌïòÏÑ∏Ïöî!' },
        'Aatrox': { role: 'TOP', tip: 'Í≤ÄÏúºÎ°ú Ï†ÅÏùÑ Î≤†Î©∞ Ï≤¥Î†•ÏùÑ ÌöåÎ≥µÌïòÏÑ∏Ïöî!' },
        'Camille': { role: 'TOP', tip: 'Ï†ïÎ∞ÄÌïú Îã§Î¶¨Î°ú Ï†ÅÏùÑ Ï†àÎã®ÌïòÏÑ∏Ïöî!' },
        'Nasus': { role: 'TOP', tip: 'QÎ•º Í≥ÑÏÜç Ïä§ÌÉù ÏåìÏïÑ ÏµúÍ∞ïÏù¥ ÎêòÏÑ∏Ïöî!' },

        // ========== MID Ï±îÌîºÏñ∏Îì§ ==========
        'Yasuo': { role: 'MID', tip: 'Î∞îÎûåÏùò Ïû•Î≤ΩÏúºÎ°ú ÏõêÍ±∞Î¶¨ Í≥µÍ≤©ÏùÑ ÎßâÏúºÏÑ∏Ïöî!' },
        'Zed': { role: 'MID', tip: 'Í∑∏Î¶ºÏûêÎ•º Ïù¥Ïö©Ìï¥ Í∏∞ÏäµÌïòÏÑ∏Ïöî!' },
        'Ahri': { role: 'MID', tip: 'Îß§ÌòπÏúºÎ°ú Ï†ÅÏùÑ Ïú†ÌòπÌïòÏÑ∏Ïöî!' },
        'LeBlanc': { role: 'MID', tip: 'ÌôòÏÉÅÏúºÎ°ú Ï†ÅÏùÑ ÏÜçÏù¥ÏÑ∏Ïöî!' },
        'Syndra': { role: 'MID', tip: 'Íµ¨Ï≤¥Î•º Ï°∞ÏûëÌï¥ Ï†ÅÏùÑ Ï†úÏïïÌïòÏÑ∏Ïöî!' },
        'Orianna': { role: 'MID', tip: 'Í≥µÏúºÎ°ú ÏïÑÍµ∞ÏùÑ Î≥¥Ìò∏ÌïòÍ≥† Ï†ÅÏùÑ Í≥µÍ≤©ÌïòÏÑ∏Ïöî!' },
        'Lux': { role: 'MID', tip: 'ÎπõÏùò ÎßàÎ≤ïÏúºÎ°ú Ï†ÅÏùÑ Í¥ÄÌÜµÌïòÏÑ∏Ïöî!' },
        'Akali': { role: 'MID', tip: 'Ïó∞ÎßâÍ≥º Í∏∞ÎèôÏÑ±ÏúºÎ°ú ÏïîÏÇ¥ÌïòÏÑ∏Ïöî!' },
        'Annie': { role: 'MID', tip: 'Í≥∞ Ìã∞Î≤ÑÏôÄ Ìï®Íªò Î∂àÍΩÉÏúºÎ°ú Ï†ÅÏùÑ ÌÉúÏö∞ÏÑ∏Ïöî!' },
        'Malzahar': { role: 'MID', tip: 'Í≥µÌóàÏ∂©ÏúºÎ°ú ÎùºÏù∏ÏùÑ Ìë∏Ïâ¨ÌïòÏÑ∏Ïöî!' }
    };

    const championNames = Object.keys(championData);
    let isSpinning = false;

    // ÌòÑÏû¨ Î≤ÑÏ†Ñ Ï†ïÎ≥¥ (ThymeleafÏóêÏÑú Í∞ÄÏ†∏Ïò§Í∏∞, ÏóÜÏúºÎ©¥ Í∏∞Î≥∏Í∞í)
    const currentVersion = /*[[${version}]]*/ '14.23.1';

    function spinRoulette() {
        if (isSpinning) return;

        // DOM ÏöîÏÜåÎì§ ÌôïÏù∏
        const btn = document.getElementById('roulette-btn');
        const display = document.getElementById('roulette-display');
        const question = document.getElementById('roulette-question');
        const championImage = document.getElementById('champion-image');
        const championName = document.getElementById('champion-name');
        const championRole = document.getElementById('champion-role');
        const championTip = document.getElementById('champion-tip');

        // ÌïÑÏàò ÏöîÏÜåÎì§Ïù¥ ÏóÜÏúºÎ©¥ Ìï®Ïàò Ï¢ÖÎ£å
        if (!btn || !display || !question || !championImage) {
            console.error('Î£∞Î†õ DOM ÏöîÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§:', {
                btn: !!btn,
                display: !!display,
                question: !!question,
                championImage: !!championImage
            });
            return;
        }

        isSpinning = true;

        // Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
        btn.disabled = true;
        btn.textContent = 'ÎèåÎ¶¨Îäî Ï§ë...';

        // Î£∞Î†õ Ïï†ÎãàÎ©îÏù¥ÏÖò ÏãúÏûë
        display.classList.add('spinning');
        question.style.display = 'block';
        championImage.style.display = 'none';

        // Í≤∞Í≥º Ïà®Í∏∞Í∏∞
        championName.style.display = 'none';
        championRole.style.display = 'none';
        championTip.style.display = 'none';

        // 2Ï¥à ÌõÑ Í≤∞Í≥º ÌëúÏãú
        setTimeout(() => {
            // ÎûúÎç§ Ï±îÌîºÏñ∏ ÏÑ†ÌÉù
            const randomChampion = championNames[Math.floor(Math.random() * championNames.length)];
            const championInfo = championData[randomChampion];

            // Ïï†ÎãàÎ©îÏù¥ÏÖò Ï§ëÏßÄ
            display.classList.remove('spinning');

            // Í≤∞Í≥º ÌëúÏãú
            question.style.display = 'none';
            championImage.style.display = 'block';
            championImage.src = `https://ddragon.leagueoflegends.com/cdn/${currentVersion}/img/champion/${randomChampion}.png`;
            championImage.alt = randomChampion;

            championName.textContent = randomChampion;
            championName.style.display = 'block';

            championRole.textContent = championInfo.role;
            championRole.style.display = 'block';

            championTip.textContent = championInfo.tip;
            championTip.style.display = 'block';

            // Î≤ÑÌäº ÌôúÏÑ±Ìôî
            btn.disabled = false;
            btn.textContent = 'Îã§Ïãú ÎèåÎ¶¨Í∏∞! üé≤';
            isSpinning = false;

            // Ìö®Í≥ºÏùå Ïû¨ÏÉù (ÏÑ†ÌÉùÏÇ¨Ìï≠)
            playRouletteSound();

        }, 2000);
    }

    function playRouletteSound() {
        try {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            // Î£∞Î†õ ÏôÑÎ£å ÏÇ¨Ïö¥Îìú
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.1);
            oscillator.frequency.exponentialRampToValueAtTime(600, audioContext.currentTime + 0.2);

            oscillator.type = 'sine';
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);

            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        } catch (e) {
            console.log('Audio playback not supported');
        }
    }

    // ===== üéÆ ÎØ∏ÎãàÍ≤åÏûÑ Í¥ÄÎ†® Î≥ÄÏàòÎì§ =====
    let currentReactionGame = null;
    let currentSnakeGame = null;

    // ÎØ∏ÎãàÍ≤åÏûÑ ÌÜ†Í∏Ä Ìï®Ïàò
    function toggleMinigame(gameId) {
        const content = document.getElementById(gameId + '-content');
        const arrow = document.getElementById(gameId + '-arrow');

        if (content.classList.contains('expanded')) {
            content.classList.remove('expanded');
            arrow.classList.remove('expanded');
            arrow.textContent = '‚ñº';

            // Í≤åÏûÑ Ï†ïÎ¶¨
            if (gameId.includes('reaction-test') && currentReactionGame) {
                currentReactionGame.destroy();
                currentReactionGame = null;
            }
            if (gameId.includes('snake-game') && currentSnakeGame) {
                currentSnakeGame.destroy();
                currentSnakeGame = null;
            }
        } else {
            // Îã§Î•∏ Î™®Îì† ÎØ∏ÎãàÍ≤åÏûÑ Îã´Í∏∞
            document.querySelectorAll('.minigame-content').forEach(item => {
                item.classList.remove('expanded');
            });
            document.querySelectorAll('.minigame-arrow').forEach(arrow => {
                arrow.classList.remove('expanded');
                arrow.textContent = '‚ñº';
            });

            // Í∏∞Ï°¥ Í≤åÏûÑÎì§ Ï†ïÎ¶¨
            if (currentReactionGame) {
                currentReactionGame.destroy();
                currentReactionGame = null;
            }
            if (currentSnakeGame) {
                currentSnakeGame.destroy();
                currentSnakeGame = null;
            }

            // ÏÑ†ÌÉùÎêú ÎØ∏ÎãàÍ≤åÏûÑ Ïó¥Í∏∞
            content.classList.add('expanded');
            arrow.classList.add('expanded');
            arrow.textContent = '‚ñ≤';
        }
    }

    // Î∞òÏùëÏÜçÎèÑ ÌÖåÏä§Ìä∏ ÏãúÏûë
    function startReactionTest(areaId) {
        const gameArea = document.getElementById(areaId);
        if (!gameArea) return;

        // Í∏∞Ï°¥ Í≤åÏûÑÏù¥ ÏûàÎã§Î©¥ Ï†ïÎ¶¨
        if (currentReactionGame) {
            currentReactionGame.destroy();
        }

        // ReactionTestGame ÌÅ¥ÎûòÏä§ ÏßÅÏ†ë Íµ¨ÌòÑ (Í∞ÑÎã® Î≤ÑÏ†Ñ)
        currentReactionGame = createReactionTestGame(gameArea);
    }

    // Î±Ä Í≤åÏûÑ ÏãúÏûë
    function startSnakeGame(areaId) {
        const gameArea = document.getElementById(areaId);
        if (!gameArea) return;

        // Í∏∞Ï°¥ Í≤åÏûÑÏù¥ ÏûàÎã§Î©¥ Ï†ïÎ¶¨
        if (currentSnakeGame) {
            currentSnakeGame.destroy();
        }

        // SnakeGame ÌÅ¥ÎûòÏä§ ÏßÅÏ†ë Íµ¨ÌòÑ (Í∞ÑÎã® Î≤ÑÏ†Ñ)
        currentSnakeGame = createSnakeGame(gameArea);
    }

    // Î∞òÏùëÏÜçÎèÑ ÌÖåÏä§Ìä∏ Í≤åÏûÑ ÏÉùÏÑ±
    function createReactionTestGame(gameArea) {
        let isRunning = false;
        let startTime = 0;
        let waitTimeout = null;

        gameArea.innerHTML = `
            <div style="background: rgba(0,0,0,0.8); padding: 30px; border-radius: 15px; text-align: center;">
                <div id="reaction-display" style="width: 400px; height: 300px; background: #667eea; margin: 0 auto 25px; border-radius: 15px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.8rem; cursor: pointer; transition: all 0.3s ease; font-weight: bold; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">
                    Ï§ÄÎπÑÌïòÏÑ∏Ïöî... Îπ®Í∞ÑÏÉâÏù¥ Ï¥àÎ°ùÏÉâÏúºÎ°ú Î∞îÎÄåÎ©¥ ÌÅ¥Î¶≠!
                </div>
                <div id="reaction-result" style="color: white; min-height: 100px; margin-bottom: 25px; font-size: 1.2rem; line-height: 1.5;"></div>
                <button id="reaction-start-btn" onclick="startReactionGame()" style="background: linear-gradient(45deg, #7461ee, #ff6b9d); color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; font-size: 1.1rem; font-weight: 600;">
                    üöÄ ÏãúÏûë
                </button>
            </div>
        `;

        window.startReactionGame = function() {
            if (isRunning) return;

            isRunning = true;
            const display = document.getElementById('reaction-display');
            const result = document.getElementById('reaction-result');
            const btn = document.getElementById('reaction-start-btn');

            btn.disabled = true;
            btn.textContent = 'ÎåÄÍ∏∞Ï§ë...';
            result.textContent = '';

            // Ï§ÄÎπÑ Îã®Í≥Ñ (Îπ®Í∞ÑÏÉâ)
            display.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%)';
            display.textContent = 'Ïû†Ïãú Í∏∞Îã§Î¶¨ÏÑ∏Ïöî...';

            // ÎûúÎç§ ÏãúÍ∞Ñ ÌõÑ ÏãúÏûë (2-6Ï¥à)
            const waitTime = Math.random() * 4000 + 2000;

            waitTimeout = setTimeout(() => {
                if (!isRunning) return;

                display.style.background = 'linear-gradient(135deg, #00d2d3 0%, #54a0ff 100%)';
                display.textContent = 'ÏßÄÍ∏à ÌÅ¥Î¶≠ÌïòÏÑ∏Ïöî!';
                startTime = performance.now();
            }, waitTime);

            // ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
            display.onclick = function() {
                if (!isRunning) return;

                const currentTime = performance.now();

                if (startTime === 0) {
                    // ÎÑàÎ¨¥ Îπ®Î¶¨ ÌÅ¥Î¶≠
                    endReactionGame('early', 0);
                } else {
                    // Ï†ïÏÉÅ Î∞òÏùë
                    const reactionTime = currentTime - startTime;
                    endReactionGame('success', reactionTime);
                }
            };
        };

        function endReactionGame(type, reactionTime) {
            isRunning = false;
            clearTimeout(waitTimeout);
            startTime = 0;

            const display = document.getElementById('reaction-display');
            const result = document.getElementById('reaction-result');
            const btn = document.getElementById('reaction-start-btn');

            btn.disabled = false;
            btn.textContent = 'Îã§Ïãú ÏãúÏûë';

            if (type === 'early') {
                display.style.background = '#ff6b6b';
                display.textContent = 'ÎÑàÎ¨¥ Îπ®ÎùºÏöî! üòÖ';
                result.innerHTML = 'ÏïÑÏßÅ Ïã†Ìò∏Í∞Ä ÎÇòÏò§ÏßÄ ÏïäÏïòÏñ¥Ïöî!<br>Ï¥àÎ°ùÏÉâÏúºÎ°ú Î∞îÎÄî ÎïåÍπåÏßÄ Í∏∞Îã§Î†§Î≥¥ÏÑ∏Ïöî.';
                return;
            }

            // ÏÑ±Í≥µÌïú Í≤ΩÏö∞
            const analysis = analyzeReactionTime(reactionTime);
            display.style.background = 'linear-gradient(135deg, #feca57 0%, #ff9ff3 100%)';
            display.textContent = `${Math.round(reactionTime)}ms`;
            result.innerHTML = `
                <div style="background: ${analysis.color}; color: ${analysis.textColor}; padding: 8px 16px; border-radius: 20px; font-weight: bold; margin-bottom: 10px; display: inline-block;">
                    ${analysis.grade} Îì±Í∏â
                </div><br>
                ${analysis.message}<br>
                <small style="color: #ccc;">${analysis.description}</small>
            `;
        }

        function analyzeReactionTime(time) {
            if (time < 150) {
                return {
                    grade: 'S+',
                    message: 'Ï¥àÏù∏Í∞ÑÏ†Å Î∞òÏùëÏÜçÎèÑ! ü§ñ',
                    description: 'ÌîÑÎ°úÍ≤åÏù¥Î®∏ÎèÑ Î∂ÄÎü¨ÏõåÌï† Î∞òÏùëÏÜçÎèÑÏûÖÎãàÎã§!',
                    color: 'linear-gradient(45deg, #ffd700, #ffed4e)',
                    textColor: '#333'
                };
            } else if (time < 200) {
                return {
                    grade: 'S',
                    message: 'ÌîÑÎ°úÍ≤åÏù¥Î®∏ ÏàòÏ§Ä! üèÜ',
                    description: 'Ï†ÑÎ¨∏ Í≤åÏù¥Î®∏ ÏàòÏ§ÄÏùò ÎÜÄÎùºÏö¥ Î∞òÏùëÏÜçÎèÑÎÑ§Ïöî!',
                    color: 'linear-gradient(45deg, #c0c0c0, #e8e8e8)',
                    textColor: '#333'
                };
            } else if (time < 250) {
                return {
                    grade: 'A',
                    message: 'Îß§Ïö∞ Îπ†Î¶Ñ! ‚ö°',
                    description: 'ÏÉÅÏúÑ 5%Ïóê Ìï¥ÎãπÌïòÎäî Îπ†Î•∏ Î∞òÏùëÏÜçÎèÑÏûÖÎãàÎã§!',
                    color: 'linear-gradient(45deg, #cd7f32, #daa520)',
                    textColor: 'white'
                };
            } else if (time < 300) {
                return {
                    grade: 'B',
                    message: 'Ï¢ãÏùÄ Î∞òÏùëÏÜçÎèÑ! üëç',
                    description: 'ÌèâÍ∑†Î≥¥Îã§ Îπ†Î•∏ Ï¢ãÏùÄ Î∞òÏùëÏÜçÎèÑÏòàÏöî!',
                    color: 'linear-gradient(45deg, #4ecdc4, #44a08d)',
                    textColor: 'white'
                };
            } else {
                return {
                    grade: 'C',
                    message: 'Ïó∞ÏäµÏù¥ ÌïÑÏöîÌï¥Ïöî! üí™',
                    description: 'Ï°∞Í∏à Îçî ÏßëÏ§ëÌï¥ÏÑú Ïó∞ÏäµÌï¥Î≥¥ÏÑ∏Ïöî!',
                    color: 'linear-gradient(45deg, #95a5a6, #7f8c8d)',
                    textColor: 'white'
                };
            }
        }

        return {
            destroy: function() {
                isRunning = false;
                clearTimeout(waitTimeout);
                if (window.startReactionGame) {
                    delete window.startReactionGame;
                }
            }
        };
    }

    // Î±Ä Í≤åÏûÑ ÏÉùÏÑ± (Í∞ÑÎã® Î≤ÑÏ†Ñ)
    function createSnakeGame(gameArea) {
        let canvas, ctx;
        let snake = [{x: 10, y: 10}];
        let direction = {x: 1, y: 0};
        let food = {x: 15, y: 15};
        let score = 0;
        let gameLoop = null;
        let gameRunning = false;

        gameArea.innerHTML = `
            <div style="background: rgba(0,0,0,0.8); padding: 25px; border-radius: 15px; text-align: center;">
                <div style="color: white; margin-bottom: 20px; font-size: 1.1rem;">
                    Ï†êÏàò: <span id="snake-score" style="color: #4ecdc4; font-weight: bold;">0</span>
                </div>
                <canvas id="snake-canvas" width="400" height="400" style="background: #1a1a2e; border: 3px solid #7461ee; border-radius: 12px; display: block; margin: 0 auto 20px;"></canvas>
                <div style="color: #ccc; margin-bottom: 20px;">Î∞©Ìñ•ÌÇ§Î°ú Ï°∞ÏûëÌïòÏÑ∏Ïöî!</div>
                <button id="snake-start-btn" onclick="startSnakeGameLoop()" style="background: linear-gradient(45deg, #7461ee, #ff6b9d); color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; font-size: 1rem; margin-right: 10px;">üöÄ ÏãúÏûë</button>
                <button id="snake-reset-btn" onclick="resetSnakeGame()" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.2); padding: 15px 30px; border-radius: 25px; cursor: pointer; font-size: 1rem; display: none;">üîÑ Îã§ÏãúÌïòÍ∏∞</button>
            </div>
        `;

        canvas = document.getElementById('snake-canvas');
        ctx = canvas.getContext('2d');

        const keyHandler = (e) => {
            if (!gameRunning) return;
            switch(e.key) {
                case 'ArrowUp': if (direction.y === 0) direction = {x: 0, y: -1}; break;
                case 'ArrowDown': if (direction.y === 0) direction = {x: 0, y: 1}; break;
                case 'ArrowLeft': if (direction.x === 0) direction = {x: -1, y: 0}; break;
                case 'ArrowRight': if (direction.x === 0) direction = {x: 1, y: 0}; break;
            }
            e.preventDefault();
        };
        document.addEventListener('keydown', keyHandler);

        window.startSnakeGameLoop = function() {
            if (gameRunning) return;
            gameRunning = true;
            document.getElementById('snake-start-btn').style.display = 'none';
            gameLoop = setInterval(updateSnakeGame, 150);
        };

        window.resetSnakeGame = function() {
            gameRunning = false;
            clearInterval(gameLoop);
            snake = [{x: 10, y: 10}];
            direction = {x: 1, y: 0};
            food = {x: 15, y: 15};
            score = 0;
            document.getElementById('snake-score').textContent = '0';
            document.getElementById('snake-start-btn').style.display = 'inline-block';
            document.getElementById('snake-reset-btn').style.display = 'none';
            drawSnakeGame();
        };

        function updateSnakeGame() {
            const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};
            if (head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20 ||
                snake.some(segment => segment.x === head.x && segment.y === head.y)) {
                gameRunning = false;
                clearInterval(gameLoop);
                alert(`Í≤åÏûÑ Ïò§Î≤Ñ! Ï†êÏàò: ${score}`);
                document.getElementById('snake-reset-btn').style.display = 'inline-block';
                return;
            }
            snake.unshift(head);
            if (head.x === food.x && head.y === food.y) {
                score += 10;
                document.getElementById('snake-score').textContent = score;
                generateFood();
            } else {
                snake.pop();
            }
            drawSnakeGame();
        }

        function drawSnakeGame() {
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, 400, 400);

            // Î±Ä Í∑∏Î¶¨Í∏∞
            snake.forEach((segment, index) => {
                ctx.fillStyle = index === 0 ? '#4ecdc4' : '#45b7d1';
                ctx.fillRect(segment.x * 20, segment.y * 20, 18, 18);
            });

            // ÏùåÏãù Í∑∏Î¶¨Í∏∞
            ctx.fillStyle = '#ff6b6b';
            ctx.fillRect(food.x * 20, food.y * 20, 18, 18);
        }

        function generateFood() {
            do {
                food = {x: Math.floor(Math.random() * 20), y: Math.floor(Math.random() * 20)};
            } while (snake.some(segment => segment.x === food.x && segment.y === food.y));
        }

        drawSnakeGame();

        return {
            destroy: function() {
                gameRunning = false;
                clearInterval(gameLoop);
                document.removeEventListener('keydown', keyHandler);
                if (window.startSnakeGameLoop) delete window.startSnakeGameLoop;
                if (window.resetSnakeGame) delete window.resetSnakeGame;
            }
        };
    }

    // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ïï†ÎãàÎ©îÏù¥ÏÖò Ìö®Í≥º
    document.addEventListener('DOMContentLoaded', function() {
        // Ïπ¥Îìú Ïï†ÎãàÎ©îÏù¥ÏÖò
        const cards = document.querySelectorAll('.comment-card, .user-info-card, .stat-card, .champion-roulette-card, .content-recommendation');
        cards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px)';

            setTimeout(() => {
                card.style.transition = 'all 0.6s ease';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 150);
        });
    });

    // ÌéòÏù¥ÏßÄ Ïñ∏Î°úÎìú Ïãú Í≤åÏûÑ Ï†ïÎ¶¨
    window.addEventListener('beforeunload', function() {
        if (currentReactionGame) {
            currentReactionGame.destroy();
        }
        if (currentSnakeGame) {
            currentSnakeGame.destroy();
        }
    });

    // Ï†ÑÏó≠ Ìï®ÏàòÎì§ÏùÑ windowÏóê Î∞îÏù∏Îî©
    window.spinRoulette = spinRoulette;
    window.toggleMinigame = toggleMinigame;
    window.startReactionTest = startReactionTest;
    window.startSnakeGame = startSnakeGame;
</script>
</body>
</html>